(function(n){n.fn.zoom=function(t){var l=!1,r=this,u=t,f=n(".jsZoomLens",r),b=n(".fpImgOpen",r),k=n(".fpImgClose",r),s,i,h,c,a,v,y,p,d,g,e,o,nt,tt,it,w,rt,ut;return l=!u||!u.length,l&&(u=n("<div>").appendTo(r)),it=function(){i=n(new Image);l&&i.css({"max-width":"none",position:"absolute","z-index":"2"});u.append(i);n(i).load(function(){c=r.height();h=r.width();a=r.offset().left;v=r.offset().top;y=u.width();p=u.height();d=i[0].width/h;g=i[0].height/c;e=y/d;o=p/g;nt=i[0].width<y;tt=i[0].height<p;u.add(f).fadeIn("fast")})},n.isTouch()||(w=r.data("zoommethod"),rt=w?"click":"mouseover",w&&f.click(function(n){i[0].src&&(i[0].src="",u.add(f).hide(),b.show(),k.hide());n.stopPropagation()}),ut=w?f:r,ut.mouseout(function(){s&&clearTimeout(s);i[0].src&&(s=setTimeout(function(){i[0].src="";u.add(f).hide();b.show();k.hide()},200))}),r.one("mouseenter",it).on(rt,function(){s&&clearTimeout(s);s=setTimeout(function(){i[0].src=u.data("src");b.hide();k.show()},200)}).mousemove(function(n){if(i[0].src){n.preventDefault();var t=n.pageX-a,r=n.pageY-v,u,s;n.pageX-e/2<a||nt?t=e/2:n.pageX+e/2>a+h&&(t=h-e/2+1);n.pageY-o/2<v||tt?r=o/2:n.pageY+o/2>v+c&&(r=c-o/2+1);l?(u=-(t*(i.outerWidth()-h)/h),s=-(r*(i.outerHeight()-c)/c)):(u=Math.ceil(y/2-d*t),s=Math.ceil(p/2-g*r),f.outerWidth(e).outerHeight(o),f.css("left",t-e/2).css("top",r-o/2));i.css("left",u).css("top",s)}})),{setBigImg:function(n){return u.data("src",n),this}}}})($fwk),function(n,t){function r(n){i(t(".fpLk:first",n),t(".fpOverBlk",n));i(t(".jsFpClickLk:first",n),t(".jsfpOverlayContent",n));i(t(".jsFpBaLk:first, .jsFpLk:first",n),t(".jsFpBaOverBlk",n))}t.fn.lazyload||(t.fn.lazyload=t.noop);t.fn.countDown||(t.fn.countDown=t.noop);var e=!1,f=undefined,u=function(){var n=t("#ocSessionId");e?f&&!n.val()&&n.val(f):(e=!0,t.ajax({url:"/InitSessionId",type:"GET",dataType:"json",success:function(t){f=t;n.val(f);o()},error:function(){e=!1}}))},o=function(){var n=function(){var n=document.createEvent("Event");n.initEvent("threatMetrixTagEvent",!0,!0);window.dispatchEvent(n)};window.addEventListener?window.addEventListener("load",n,!1):window.attachEvent&&window.attachEvent("onload",n)},i=function(n,i){var r=t("#fpContent"),e=i.attr("data-showTimer")?i.attr("data-showTimer"):150,f=i.attr("data-hideTimer")?i.attr("data-hideTimer"):150,u;t.isTouch()&&(u=function(){return t("#transparentOverlay").hide(),t(".fpOverBlk:visible",r).hide(),t(".jsfpOverlayContent:visible",r).hide(),isFired=!1,!1},n.click(function(){if(!isFired)return t(".jsOverlay .fpOverBlk",r).hide(),t("#transparentOverlay").show(),i.slideDown(100),isFired=!0,!1}),t(".fpCloseOver",i).bind("click",u),t(".fpCloseOverlay",i).bind("click",u),t("body").on("click","#transparentOverlay",u),t(".fpCloseOver",i).removeClass("dn"),t(".fpCloseOverlay",i).removeClass("dn"));n.hover(function(){t(".fpOverBlk:visible",r).hide();i.css("display")=="none"&&stopTimer(function(){i.slideDown("fast");isFired=!0},e)},function(){stopTimer(function(){i.hide();isFired=!1},f);i.mouseenter(function(){stopTimer(hTimer)}).mouseleave(function(){stopTimer(function(){i.hide();isFired=!1},f)})})};t.init("fpAnchorNavBar",function(){function u(){var u=t("#fpZnPrdMain");if(i&&i.length!==0&&u&&u.length!==0){var o=n.pageYOffset,f=i.hasClass("hidden"),e=t(".headerAndMsg",r).height(),s=e;o>s?f&&(i.css("top",e),i.removeClass("hidden")):f||i.addClass("hidden")}}function f(n,i){var r=t(i);if(!r||r.length===0)return!1;var u=r.toArray().reduce(function(n,i){var r=t(i),f=r.height(),u=r.offset().top,e=f+u;return n.topEdges.push(u),n.bottomEdges.push(e),n},{topEdges:[],bottomEdges:[]}),f=Math.min.apply(null,u.topEdges)-5,e=Math.max.apply(null,u.bottomEdges);return n>=f&&n<=e}function e(){t(".jsAnchorNavBarWrapper.active",i).removeClass("active");t(".jsAnchorNavBarLink",i).toArray().find(function(u){if(!u)return!1;var e=t(u),o=e.attr("data-anchor-bloc-selector"),s=e.attr("href"),h=o?o:s,c=t(".headerAndMsg",r).height(),l=n.pageYOffset+c+i.height(),a=f(l,h);return a?(e.parent().addClass("active"),!0):!1})}function o(){u();e()}var r=t("#header"),i=t("#fpAnchorNavBar");t(n).on("scroll",t.fn.throttle(100,o,!0));window.addEventListener("similarProductsAnchor",function(n){if(!n||!n.result||!n.result.products)return null;var r=n.result.products;r.length>0&&t(".jsSimilarProductAnchor",i).removeClass("hiddenSimilarProductAnchor")});i.on("click",".jsAnchorNavBarLink",function(){if(t(this).attr("href")&&t(this).attr("href").startsWith("#"))return window.location.replace(t(this).attr("href")),!1})});t.init("fpAnchorAssociatedProductTab",function(){var n=t("#fpAnchorNavBar");t(".jsAssociatedProductAnchor",n).removeClass("associatedProductAnchor")});t.init("fp",function(){function yi(n){var i=n.parents(".jsFpVariationGroupBlock"),u=t(".jsFpVariationGroupTitleHighlited",i),f=t(".jsFpVariationGroupLayerLabel",i),r=n.data("message");f.html(r);u.html(r)}function cu(n,i,r){var u=t(".jsfpVariationGroupToggleVisible",r),f=n?i.data("minus"):i.data("plus");i.html(f);u.each(function(){n==!0?t(this).removeClass("dn").css({opacity:0}).animate({opacity:1},800):t(this).addClass("dn")})}function lu(n){var o,u,i;if(at){var s=t(".jsMainPrice",f),h=t(".jsPerUnitPrice",f),i=t(".jsFpSubscriptionRadio:checked",l),r=t(".jsSubscriptionDiscountPercentage",f),e=t(".jsSubscriptionPrice",f);i.length>0&&i.val()=="Subscription"&&(o=r&&r.attr("data-subscription-price-cdav")||"",u=e&&e.attr("data-subscription-price-cdav")||"",o&&r&&r.html(o),u&&r&&s&&s.attr("content",u.replace(",",".").replace("€","").replace(/\s/g,"")),u&&r&&e,e.html(u.replace(" ","")),ht(n),i=t(".jsFpSubscriptionRadio:checked",l),i.length>0&&i.val()!=""&&subscriptionChangeLabels(i.val()))}}function au(n){return n.indexOf("€")>0?n.replace("€",""):n}function pi(n,t,i){var f=Math.floor(i),r=t.split(n),u="";return r.length>0&&(u=au(r[1])),f+"<sup>€"+u+"<\/sup>"}function vu(n){var t=parseInt(n);return n.indexOf(",")>0&&!isNaN(t)?pi(",",n,t):n.indexOf(".")>0&&!isNaN(t)?pi(".",n,t):n}function dt(n){var r=t(".jsMainPrice",f),i;i=n=="Subscription"?t(".jsSubscriptionPrice",l).text():t(".jsClassicPrice",l).text();r.html(vu(i));r.attr("content",i.replace(",",".").replace("€","").replace(/\s/g,""))}function ht(n){var u,e,o,h,c=t(".jsSubscriptionPrice",f),r=t(".jsSubscriptionDiscountPercentage",f),y=t(".jsPerUnitPrice",f),p=t(".jsPackagingUnitPrice",f),i=t(".jsOptionListVariantPrice option:selected",s),a;if(i.length>0&&i.val()!="-1"){var d=i.attr("data-unit-price")||"",g=(i.attr("data-price")||"").split(";"),v=(i.attr("data-subscription-price")||"").split(";"),k=(i.attr("data-subscription-price-cdav")||"").split(";");n?(u=k.length>2&&k[0]||v.length>2&&v[0],e=r.attr("data-subscription-price-cdav")||r.attr("data-subscription-price")||"",o=i.attr("data-subscription-cdav-unit-price")||i.attr("data-subscription-unit-price")||"",h=i.attr("data-package-subscription-cdav-unit-price")||i.attr("data-package-subscription-unit-price")||""):(u=v.length>2&&v[0],e=r.attr("data-subscription-price")||"",o=i.attr("data-subscription-unit-price")||"",h=i.attr("data-package-subscription-unit-price")||"");w(o,!0);b(h,!0)}else n?(u=c.attr("data-subscription-price-cdav")||c.attr("data-subscription-price")||"",e=r.attr("data-subscription-price-cdav")||r.attr("data-subscription-price")||"",o=y.attr("data-subscription-cdav-unit-price")||y.attr("data-subscription-unit-price")||"",h=p.attr("data-package-subscription-cdav-unit-price")||p.attr("data-package-subscription-unit-price")||""):(u=c.attr("data-subscription-price")||"",e=r.attr("data-subscription-price")||"",o=y.attr("data-subscription-unit-price")||"",h=p.attr("data-package-subscription-unit-price")||""),w(o,!1),b(h,!1);u&&c&&c.html(u);e&&r&&r.html(e);a=t(".jsFpSubscriptionRadio:checked",l);a.length>0&&a.val()!=""&&dt(a.val())}function wi(){t(".jsFpBulletPointMore",rt).slideToggle(1e3);k.text()==eu?(kt.hide(),li.addClass("fpReadMoreAndLessImgRotate"),k.text(sf)):(kt.show(),li.removeClass("fpReadMoreAndLessImgRotate"),k.text(eu))}function bi(){var n=t(".jsSltSize option:selected",e),i=t(".jsSltSize",e),r=t("#addForm input[name='ProductFormData.ProductPostedForm.OfferId']").val();n.length&&n.data("offer").toString()!==r.val()&&i.val("-1")}function ki(){var r=t(".jsSltSize, .jsSltColor, .jsSltCond",e),i=t(".jsMsgVar, .jsNewMsgVar",e),f=t(".jsSltSize, .jsSltColor, .jsSltCond",e),h=t("#fpOneCk"),o=t(".fpIpdtArea",s).add(t(".jsAssoPrdtLines > li",et)),u=c;u.on("mouseover",".jsMainForm .jsValidForm",function(){bi();t(this.form).checkFormErrors(f)});u.on("mouseover",".jsOneCkForm .jsValidForm",function(){bi();t(this.form).checkFormErrors(f.add(t(".jsOneCkAddr",h)))});u.on("mouseout",".jsValidForm",function(){t(this.form).ckDisability(!1)});i.length?(r.change(function(){t(this).removeClass("selMsgVar");r.filter(function(){return this.value==-1}).length?t(".jsSltSize",r).val()==-1?i.removeClass("gt"):i.removeClass("lt"):(i.hide(),i.removeClass("gt lt"))}),o.each(function(){var n=t(this),i=t(".jsMsgVar",n);t("input[type=checkbox]",n).click(function(){var f=t("select",n);if(f.val()=="-1"){if(this.checked)return i.show(0,function(){t(this).addClass("show").html(popinMsgVariant.acc.format(t("option:selected",f).text()))}),t("select",n).addClass("selMsgVar"),!1}else{var r=t(this).parents("label"),u=t("span",r),o=t(this).parents("li"),s=o.index(),e=t(".jsAssoPrdtPic >li:eq("+s+")",et);u.html(r.hasClass("checked")?u.data("txt"):u.data("check"));r.toggleClass("checked");e.length&&t(".jsAssoAdded",e).toggleClass("dn")}});t("select",n).change(function(){var n=t(this);n.removeClass("selMsgVar").find("option").filter(function(){return this.value==-1}).remove();i.hide(0,function(){i.removeClass("show")})})}),t.addToBasketValidate=[function(){var h=t(".jsSltSize, .jsSltColor, .jsSltCond",e),r=h.filter(function(){var n;return n=this.value?this.value!=-1:t(this).data("value"),!n}).addClass("selMsgVar"),i=t(".jsMsgVar",e),u="";if(i.removeClass("lt gt"),r.length){i=t(".jsMsgVar",e);r.length>1?(u=popinMsgVariant.sizeColor,i.addClass("lt gt")):r.filter(".jsSltSize").length?(u=popinMsgVariant.size,i.addClass("lt")):r.filter(".jsSltColor").length?(u=popinMsgVariant.color,i.addClass("gt")):r.filter(".jsSltCond").length&&(u=popinMsgVariant.cond,i.addClass("lt"));i.text(u).fadeTo("fast",1);var o=i.filter(":visible:first"),f=t(n),s=o.offset().top+5*o.innerHeight()-(f.height()+f.scrollTop());s>0&&t("html, body").animate({scrollTop:s+f.scrollTop()},"fast")}return!r.length}],t.addToBasketValidate.push(function(){var n=!0;return o.filter(function(){return t(this).find("option:selected[value='-1'], input:checked").length>=2}).each(function(){var i=this,r=t(".jsMsgVar",i),u=t("select",i);t("html, body").animate({scrollTop:t(i).offset().top},0,function(){r.show(0,function(){t(this).addClass("show").html(popinMsgVariant.acc.format(t("option:selected",u).text()))})});n=!1}),n})):(t(".fpIpdtArea input, .jsAssoPrdtLines input[type=checkbox]",s).click(function(){var n=t(this).parents("label"),i=t("span",n),u=t(this).parents("li"),f=u.index(),r=t(".jsAssoPrdtPic >li:eq("+f+")",et);i.html(n.hasClass("checked")?i.data("txt"):i.data("check"));n.toggleClass("checked");r.length&&t(".jsAssoAdded",r).toggleClass("dn")}),t.addToBasketValidate.push(function(){var n="",i=!0;return t(".fpBlkDbl input:checked, #fpAssMain input:checked, .fpIndisPdt input:checked",s).each(function(){n==""&&t(this).parents("div:eq(1)").find("select").each(function(){if(this.value==="-1")return n=popinMsgVariant.acc.format(t("option:selected",this).text()),t.popin.alert(n,{btnTxt:popinMsgVariant.btnTxt}),i=!1,i=!1})}),i}))}function di(){var n=t("#fpOneCk, #fpOneCkBottom"),r=n.data("url-oneck-init"),o=n.data("url-oneck-adr"),i=t("form:not(.jsOneCkForm)",f);n.on("change","select",function(){var u=t(this.form).add(i),r;this.value!="-1"?(t(".jsOverBP",n).fadeIn(),t.ajax({type:"POST",url:o,data:u.serialize(),success:function(t){t&&n.html(t)},error:function(){var n=t("#fpOneCk .jsOneCkAddr, #fpOneCkBottom .jsOneCkAddr");n.val(-1);n.addClass("selMsgVar")},complete:function(){}})):(r=t("#fpOneCk .jsOneCkAddr, #fpOneCkBottom .jsOneCkAddr"),r.val(-1),r.addClass("selMsgVar"))});n.length&&t.custo.addListener(function(){t.post(r,i.serialize(),function(i){if(i){n.html(i);u();var r=t("#fpAssMain").add(t(".jsNoOneCk",e));r.click(function(){t("input:checked",r).length>0?n.hide():n.show()})}})})}function gi(){var n=t(".jsColFloatAdDisplay",c),r=n.data("action");if(r){var e=n.data("widget"),u=[],f=!0;t.post(r,function(r){var e,s,h,o;if(r){if(r.html&&(n.html(r.html),n.has(".jsOverlay")&&(i(t(".fpLk:first",n),t(".fpOverBlk",n)),i(t(".jsFpClickLk:first",n),t(".jsfpOverlayContent",n))),f=!1,e=t("#jsFpColFloatAdDisplayContent"),s=t(".jsAdDisplayIsSwordProduct",e).val(),s=="True")){var c=t(".jsAdDisplayProductId",e).val(),l=t(".jsAdDisplayOfferId",e).val(),a=t(".jsAdDisplaySellerId",e).val(),v=t(".jsColFloatAdDisplayPrice",e).text().trim().replace("€",""),y=t(".jsColFloatAdDisplayStrikedPrice",e).text().trim().replace("€",""),p=t(".jsAdDisplaySwordTag",e).val(),w=t(".jsAdDisplayStock",e).val(),b=t(".jsAdDisplayCustomerRating",e).val(),k=t(".jsAdDisplayRateCount",e).val();t.track&&t.track.tracking&&t.track.tracking.send&&(h=t.track.tracking.params.type,t.extend(t.track.tracking.params,{type:"CAROUSEL",idCar:null,bName:null,key:null,carProducts:null}),t.track.tracking.params.originType||(t.track.tracking.params.originType=h),o=[],o.push({sku:c,price:parseFloat(v.replace(",",".")),priceS:parseFloat(y.replace(",",".")),sw:p,sellerId:parseInt(a),offerId:parseInt(l),rate:parseFloat(b.replace(",",".")),rVoter:parseInt(k),stk:parseInt(w)}),t.track.tracking.params.idCar=4583423,t.track.tracking.params.bName="",t.track.tracking.params.key="sword_pad",t.track.tracking.params.carProducts=o,t.track.tracking.send(!0))}r.missedAdsInfo&&u.push(r.missedAdsInfo)}}).always(function(){t.mabayaContext.reportAsyncWidget(e,u,f)})}}function nr(){var n=t("#cShipping"),r=n.data("action");r?t.ajax({type:"GET",url:r,success:function(r){if(r.deliveryDelay&&r.deliveryDelay.trim().length>0&&t("#deliveryDay").html(r.deliveryDelay),r.customerShipping){var u=t(r.customerShipping);u.is(".jsOverlay")&&(i(t(".fpLk:first",u),t(".fpOverBlk",u)),i(t(".jsFpClickLk:first",u),t(".jsfpOverlayContent",u)));t(".jsCountdown",u).countDown({callbackEnd:function(){var i=t(this),n;i.is(".jsEndStress")&&(n=i.parent(),n.next().show(),n.remove(),t(".jsStressDelivery").html(""))}});it(u);n.html(u)}},complete:function(){n.show();t("#deliveryDay").parent().removeClass("ddn")}}):it()}function tr(){var n=t("#cShippingNew"),u=n.data("action"),l=t("#guaranteedDelivery",n),o=t("#deliveryDelay",n),f=t("#deliveryStress",n);u?t.ajax({type:"GET",url:u,success:function(n){if(n.guaranteedDelivery&&l.html(n.guaranteedDelivery),n.deliveryDelay&&o.html(n.deliveryDelay),n.deliveryStress){var r=t(n.deliveryStress);r.is(".jsOverlay")&&(i(t(".fpLk:first",r),t(".fpOverBlk",r)),i(t(".jsFpClickLk:first",r),t(".jsfpOverlayContent",r)));t(".jsCountdown",r).countDown({callbackEnd:function(){var i=t(this),n;i.is(".jsEndStress")&&(n=i.parent(),n.next().show(),n.remove())}});f.html(r);it(f)}n.deliveryShippingInfo&&(t("#fpLightShippingList").prepend(n.deliveryShippingInfo),t(".jsFpLightShipping",c).removeClass("fpLightShippingNo4x"))},complete:function(){n.show();o.parent().removeClass("ddn")}}):it();var e=t("#fpShippingList"),u=e.data("action"),f=t("#deliveryStress");u&&t.ajax({type:"GET",url:u,dataType:"json",success:function(n){var u=t(n.deliveryStress);u.is(".jsOverlay")&&(i(t(".fpLk:first",u),t(".fpOverBlk",u)),i(t(".jsFpClickLk:first",u),t(".jsfpOverlayContent",u)));t(".jsCountdown",u).countDown({callbackEnd:function(){var i=t(this),n;i.is(".jsEndStress")&&(n=i.parent(),n.next().show(),n.remove(),f.html(""))}});e.prepend(n.deliveryShippingInfo);n.isDeliveryStressMoved?e.prepend(u):f.html(u);t(".jsOverlay",e).each(function(){r(this)});it(u)}});var s=t(".jsFpPreorder","#fpPreorder"),h=s.data("action"),a=t("#preorderDeliveryDay",s);h&&t.ajax({type:"GET",url:h,success:function(n){n.deliveryDelay&&a.html(n.deliveryDelay)}})}function gt(n){var o=t(".jsOffersList li",n).not(".jsShopOpenHours li"),r=t(".jsOffersList li .jsOlOverlay",n),u=t(".jsTtOverBlk",n),s=t(".jsToolTip",n),i=null,h="click mouseover";s.on(h,function(n){return i=t(this).first().siblings(".jsTtOverBlk"),i.is(":visible")||(n.type=="click"&&t("#transparentOverlay").show(),u.hide(),i.fadeIn(200)),!1});o.on(h,function(n){i=t(".jsOlOverlay",t(this));stopTimer(function(){return i.is(":visible")||n.target.className.indexOf("jsTTClose")!=-1||(n.type=="click"&&t("#transparentOverlay").show(),r.hide(),i.fadeIn(200)),!1},200)});var f=function(){return stopTimer(function(){r.fadeOut(200,function(){c()})},200),!1},e=function(){return u.fadeOut(200,function(){c()}),!1},l=function(){f();e()},c=function(){u.is(":visible")||r.is(":visible")||t("#transparentOverlay").hide()};if(t.isTouch()){t(".fpCloseOver",n).bind("click",f);t(".jsTTClose",n).bind("click",e);t("body").on("click","#transparentOverlay",l);t(".fpCloseOver",n).removeClass("dn");t(".jsTTClose",n).show()}o.on("mouseleave",f);s.on("mouseleave",e)}function ir(n){$selectQuantityDiv=t(".jsFpLeftBlockSelectorInfoWrapper",n);$updateBloc=t(".jsFpSetQuantityGreaterThanTen",n);$updateBloc.hide();t(".jsFpProductSetQuantityInput",n).val("");$selectQuantityDiv.show()}function rr(n){t(".jsFpProductSetQuantityInput",n).val("");t(".jsFpProductSetQuantitySubmitButton",n).addClass("fpProductSetQuantitySubmitButtonDisabled")}function ct(n){var i=t(".jsFpQuantityErrorMessage",n);i.hide();i.stop(!0,!0);i.removeClass("jsOnAnimated");t(".jsFpLeftBlockSelectorInfoWrapper",n).off()}function ur(n){var u=t(".jsFpLeftBlockSelect select",n),i=t(".jsFpQuantityErrorMessage",n),r=t(".jsFpProductSetQuantityInput",n).val();(r==null||r=="")&&(r=parseInt(u.val()));t.ajax({type:"POST",url:t(".jsFpProductSetQuantitySubmitButton",n).data("url"),data:{selectedQuantity:r,productId:t("#ProductFormData_ProductPostedForm_ProductId").val(),offerId:parseInt(t("#ProductFormData_ProductPostedForm_OfferId").val())},success:function(r){var f,e;ct(n);r==null||r.invalidData||r.productNotFound||(f=parseInt(r.maxQuantityAllowed),r.isSelectedQuantityAllowed?t(".jsFpLeftBlockSelect select option[value='"+r.selectedQuantity+"']").length==0?(e=new Option(r.selectedQuantity,r.selectedQuantity,!0,!0),u.prepend(e)):t(".jsFpLeftBlockSelect select option[value='"+f+"']").prop("selected",!0):(f=parseInt(r.maxQuantityAllowed),f>=1&&f<=9?(t(".jsFpLeftBlockSelect select option[value='"+f+"']").prop("selected",!0),t(".jsFpLeftBlockSelect select option").each(function(){(t(this).val()>f||t(this).val()=="+")&&t(this).remove()})):(e=new Option(r.maxQuantityAllowed,r.maxQuantityAllowed,!0,!0),u.prepend(e)),t(".fpStockInsuffisantText",n).text(r.stockInsuffisantMessage),t(".fpQuantityMaxText",n).text(r.quantityMaxMessage),t(".jsFpLeftBlockSelectorInfoWrapper",n).hover(function(){i.hasClass("jsOnAnimated")||(i.addClass("jsOnAnimated"),i.fadeIn(800).delay(5e3).fadeOut(800,function(){i.removeClass("jsOnAnimated")}))})))},complete:function(){rr(n);ir(n)}})}function yu(n){$selectQuantityDiv=t(".jsFpLeftBlockSelectorInfoWrapper",n);$selectQuantity=t(".jsFpLeftBlockSelect select",$selectQuantityDiv);$updateBloc=t(".jsFpSetQuantityGreaterThanTen",n);ct(n);$selectQuantityDiv.hide();$updateBloc.show();$input=t(".jsFpProductSetQuantityInput",n);$bOK=t(".jsFpProductSetQuantitySubmitButton",n);$bOK.attr("disabled",!0);$input.focus().keyup(function(){var n=this.value;/^\d{0,3}$/.test(n)||this.getAttribute("data-noLength")?oldVal=n:this.value=oldVal;this.value==""?($bOK.addClass("fpProductSetQuantitySubmitButtonDisabled"),$bOK.attr("disabled",!0)):($bOK.removeClass("fpProductSetQuantitySubmitButtonDisabled"),$bOK.removeAttr("disabled"),$selectQuantity.val($input.val()))});t(".jsFpProductSetQuantitySubmitButton",n).one("click",function(i){i.preventDefault();var u=t(".jsFpLeftBlockSelectorInfoWrapper .jsFpLeftBlockSelect select",n)[0],r=parseInt(t(".jsFpProductSetQuantityInput",n).val());if(r==0||r==1)return u.value="1",rr(n),ir(n),ct(n),!1;ur(n)})}function pu(n){var i=t(".jsFpLeftBlockSelectorInfoWrapper .jsFpLeftBlockSelect select",n)[0],u=t(".jsFpLeftBlockSelect",n)[0],r=0;u.on("click",function(t){ct(n);r=parseInt(t.target.value)});i.on("change",function(){var u=parseInt(i.val());i.val()=="+"?(r>9&&i.children("option:first").remove(),yu(n)):u>=1&&u<=9&&(t(".jsFpLeftBlockSelectorInfoWrapper",n).unbind("mouseenter mouseleave"),r>9&&i.children("option")[i.children("option").length-1].value=="+"&&i.children("option:first").remove(),ur(n))})}var y=n.document,ut=t.contextPage?t.contextPage.getProductId():"",s=t("#fpContent"),e=t(".fpZnTop, .jsTop, .fpTopZn, .fpColFloat",s),fr=t("#seeMoreContent"),v=t("#fpZnPrdMain"),c=t(".jsColFloat",s),yf=t(".jsColFloatAdDisplay",c),er=t("#fpCommentOnTop"),f=t("#fpBlocPrice"),g=t(".jsTriplePrice",c),a=t(".jsSltSize",e),ni=t(".jsSltCond",e),ft=t(".jsSltColor",e),ti=t(".jsPiColor",e),lt=t("#sz"),o=t("#fpRating"),h=t("#fpFAQ"),wu=t(".fpFAQSocial",h),et=t("#assoProducts"),bu=t("#descContent",s),ku=t("#fpFAQRatings",s),pf=t("#header"),or=t("#fpFAQRatings"),l=t("#fpSubscription"),du=t("#fpWlBloc"),sr=t("#fpDedicatedDeal"),nt=t("#fpGarserZone"),gu=t("#assemblyContent"),at=l.length>0,vt=function(){},ii=t("#fpRating"),hr=t(".jsfplightItem",ii),cr,yt,pt,lr,ri,ui,ar,vr,ot,fi,ei,yr,oi,si,wt,pr,p,wr,br;_currency="€";hTimer=null;stopTimer=function(t,i){hTimer&&n.clearInterval(hTimer);hTimer=typeof t=="function"?n.setTimeout(t,i):null};t.init("fpVariationGroupSelector",function(){var n=t("#fpVariationGroupSelector");n.on("mouseover",".jsFpVariationGroupOption",function(n){yi(t(n.currentTarget))}).on("mouseleave",".jsFpVariationGroupOption",function(n){var i=t(n.currentTarget),r=i.parents(".jsFpVariationGroupBlock"),u=t(".jsFpOptionSel",r);yi(u)}).on("click",".jsFpVariationGroupActionToggler",function(n){var i=t(n.target),r=i.parents(".jsFpVariationGroupBlock"),u=t(".dn",r);cu(u.length!=0,i,r)})});t(".jsFpPriceSize",fr).each(function(){var n=t(this).html().split("<sup>")[0].length;n>=4&&n<=5&&t(this).addClass("isProPriceFontSize")});t(".jsFpStikedPriceSize",fr).each(function(){var n=t(this).html().split(",")[0].length;n>=4&&n<=5&&t(this).addClass("isProStrikedPriceFontSize")});t.init("newAssProduct",function(n){function k(){var n=t(".price",".assoMainProduct")[0].innerText,i=t(".stroken",".assoMainProduct")[0]?t(".stroken",".assoMainProduct")[0].innerText:n;n!=i||t(".fpAssPriceBlkStrokenText").hasClass("fpAssEcoHidden")||t(".fpAssPriceBlkStrokenText").addClass("fpAssEcoHidden").prev().addClass("fpAssEcoHidden")}function v(){var n=u.innerText.length,i=f.innerText.length;n>6&&i>7?t(".fpAssPriceBlkEco").addClass("fpAssMaxCase").prev().addClass("fpAssMaxCase"):t(".fpAssPriceBlkEco").removeClass("fpAssMaxCase").prev().removeClass("fpAssMaxCase")}function y(t){i!=undefined&&(i.prop("checked")?(r++,s.text(n.textChecked),t.find(".jsAssoProductSelector").addClass("clicked")):(r--,s.text(n.textCheckedDefault),t.find(".jsAssoProductSelector").removeClass("clicked")));nt(d(t))}function d(n){var c=n.find(".price")[0].innerHTML,i=n.find(".stroken")[0].innerHTML,l=f.innerHTML=="0,00€",a=!1,e,s,r;return i||(l?(i="0,00€",a=!0):i=c.replace(_currency,",").concat(_currency)),e=h(u.innerHTML,c).toFixed(2),s=l?a?e:h(u.innerHTML.replace(_currency,",").concat(_currency),i).toFixed(2):h(f.innerHTML,i).toFixed(2),r=s=="0.00"?"0.00":(s-e).toFixed(2),r!="0.00"||t(".fpAssPriceBlkStrokenText").hasClass("fpAssEcoHidden")||t(".fpAssPriceBlkStrokenText").addClass("fpAssEcoHidden").prev().addClass("fpAssEcoHidden"),r!="0.00"&&t(".fpAssPriceBlkStrokenText").hasClass("fpAssEcoHidden")&&t(".fpAssPriceBlkStrokenText").removeClass("fpAssEcoHidden").prev().removeClass("fpAssEcoHidden"),u.innerHTML=g(e),f.innerText=s.toString().replace(".",",").concat(_currency),o.innerText=r.toString().replace(".",",").concat(_currency),r}function h(n,t){var r,u;return n.indexOf(",")>0?(n=p(n),r=n.split(","),t=p(t),u=t.split(",")):(r=n.split(_currency),u=t.split(_currency)),i!=undefined&&i.prop("checked")?parseInt(r[0])+parseInt(u[0])+(parseInt(r[1])/100+parseInt(u[1])/100):parseInt(r[0])-parseInt(u[0])+(parseInt(r[1])/100-parseInt(u[1])/100)}function g(n){var t=n.toString().split(".");return t[0].concat("<sup>",_currency,t[1],"<\/sup>")}function nt(t){r==1&&(w.innerText=n.titleTextDefault,l.innerHTML=n.ecoTextDefault,o.innerText=b,n.noStrikedPrice||(a.innerText=""));r>1&&!n.noStrikedPrice&&(w.innerText=n.titleText[0].concat(r,n.titleText[1]),t=="0.00"?(l.innerHTML=n.ecoTextDefault.replace("vos","d'autres"),a.innerText="",o.innerText=b):(l.innerText=n.ecoText[0],a.innerText=n.ecoText[1]))}function p(n){return n.toString().substring(0,n.length-1)}var c=t(".jsNewAssMain"),tt=t(".jsAssoProductSelector"),it=t(".jsAssoBlkPrice")[0],rt=t(".btGreen",it),u=t(".jsAssPriceBlkPrice",c)[0],f=t(".jsAssPriceBlkStroken",c)[0],w=t(".jsAssPriceBlkTitle")[0],l=t(".jsAssTextBlkBeforeEco")[0],a=t(".jsAssTextBlkAfterEco")[0],o=t(".jsAssPriceBlkEcoValue")[0],b=o.innerText,r=t(".fpAssoProductChecked",c).length,i=undefined,s=undefined;rt.each(function(){$mainItemToCheck=t(".jsSltSize, .jsSltColor, .jsSltCond",e);t(this).mouseenter(function(){t(this).parent().checkFormErrors($mainItemToCheck)}).mouseleave(function(){t(this).parent().ckDisability(!1);t(this).removeClass("selMsgVar")});t(this).click(function(){t(this).hasClass("clickDisabled")||t("#fpAddBsk").click()})});k();v();tt.each(function(){var n=t(this).parent(),r=t(".jsSltSize",n);t(this).parent().find("input[type=checkbox]")[0].checked&&(i=t(this).parent().find("input[type=checkbox]"),s=t(this).find(".jsAssoProductCheckboxText span"),t(this).addClass("clicked"),y(n));t(this).mouseenter(function(){n.checkFormErrors(r)}).mouseleave(function(){n.ckDisability(!1);r.removeClass("selMsgVar")});t(this).click(function(){i=t(this).parent().find("input[type=checkbox]");s=t(this).find(".jsAssoProductCheckboxText span");t(this).hasClass("clickDisabled")||i==undefined||(i[0].checked=!i[0].checked,y(n),v())})})});cr=function(){function n(){var o=t(".jsReportReviewPopinContent",".jsReportReviewPopin"),n=t("#reportReviewPopinForm"),i=t(".jsReportReviewText",n),r=t(".jsReportReviewBt",n),e=t(".jsReportReviewCharCount",n),s=t("span",n),u=t("input[name=IsCaptchaValidated]",n),f=null;i.keyup(function(){var t=i.val(),n=t.length;n>=$charsLength?(e.addClass("hidden"),r.removeClass("clickDisabled")):(s.text($charsLength-n),e.removeClass("hidden"),r.addClass("clickDisabled"))});t(".jsReportReviewBt",n).mousemove(function(){var u=t(this),r=i.val(),f=r.length;(!r||f<$charsLength)&&(u.addClass("clickDisabled"),t(".jsErrorMsg",n).show())});t(".jsReportReviewBt",n).mouseout(function(){t(this).removeClass("clickDisabled");t(".jsErrorMsg",n).hide()});r.click(function(e){e.preventDefault();var s=i.val(),c=s.length,h=t(".jsg-recaptcha",n);return(refreshCaptcha=function(){f==null?f=grecaptcha.render(h[0],{sitekey:h.data("sitekey"),"expired-callback":"reportCaptchaExpired"}):grecaptcha.reset(f)},reportCaptchaValidated=function(){setCaptchaValidated(!0)},reportCaptchaExpired=function(){setCaptchaValidated(!1)},setCaptchaValidated=function(n){u&&u.length&&u.val(n)},u.val()!=="true")?(refreshCaptcha(),!1):!s||c<$charsLength?(r.addClass("clickDisabled"),t(".jsErrorMsg",n).show(),!1):(toggleReport=function(){var n=$socialPage,i=n.parent(),r=n.parents(".jsDetRating"),u=r.find(".jsSta");t(".jsReportReview",i).remove();t(".jsReported",i).fadeToggle("fast");r.addClass("deactivatedDetRating");u.addClass("deactivatedRatingStar")},t.ajax({type:"POST",url:this.form.action,dataType:"html",data:n.serialize(),cache:!1,complete:function(){closePopin();toggleReport()}}),closePopin=function(){return t(".jsCancel",o).trigger("click"),!1},!1)})}function i(){var i=t(".jsCurrent",$ratingBlocPopin),n=t(i).next();n.length==0&&(n=t(".jsImgContainer:first",$ratingBlocPopin));t(i).removeClass("jsCurrent").removeClass("current");t(n).addClass("jsCurrent").addClass("current").show();t(".jsImgContainer").not(".jsCurrent").hide()}function r(){var i=t(".jsCurrent",$ratingBlocPopin),n=t(i).prev();t(n).hasClass("jsImgContainer")&&n.length!=0||(n=t(".jsImgContainer:last",$ratingBlocPopin));t(i).removeClass("jsCurrent").removeClass("current");t(n).addClass("jsCurrent").addClass("current").show();t(".jsImgContainer",$ratingBlocPopin).not(".jsCurrent").hide()}$ratingBlocPopin=t("#ratingBlocPopin");$ratSocial=t(".jsRatSocial",$ratingBlocPopin);$dataReview=t(".jsYesRat",$ratSocial).data("review");$ratSocialParent=t(".jsRatSocial",ii);$socialPage=t("[data-review='"+$dataReview+"']",$ratSocialParent).parent();$yesNoPage=t(".jsYesRat, .jsNoRat",$socialPage);$charsLength=t(".jsFpRatingPublishBy",$ratingBlocPopin).data("min-size");!$yesNoPage.is(":visible")&&$yesNoPage.length>0&&(t(".jsYesRat, .jsNoRat",$ratingBlocPopin).hide(),t(".jsRatRelevanceValidated",$ratingBlocPopin).text(t(".jsRatRelevanceValidated",$socialPage).text()).fadeIn());t(".jsNext",$ratingBlocPopin).click(function(){i()});t(".jsPrev",$ratingBlocPopin).click(function(){r()});t(".jsYesRat, .jsNoRat",$ratingBlocPopin).click(function(){var n=t(this),i=n.parent(),r=t(".jsYesRat, .jsNoRat",i),u=t(".jsYesRat",i).data("review-usefullnessurl");$socialPage.hasClass("disabled")||i.hasClass("disabled")||t.get(u+n.hasClass("jsYesRat")+"/"+n.data("review"),function(u){u&&(r.hide(),t(".jsRatRelevanceValidated",i).text(n.data("review-result")).fadeIn(),$yesNoPage.hide(),t(".jsRatRelevanceValidated",$socialPage).text(n.data("review-result")).fadeIn())})});$btnReportBlock=t(".jsReportReview",$ratingBlocPopin);$link=null;$btnReportBlock.click(function(){var i=t(this).data("review"),r=t(this).data("url"),u;return!i||!r?!1:($link=t(this),u={addedClass:"popin reportReviewPopin jsReportReviewPopin",callback:n,data:{ReviewId:i}},t.popin.showOverlay(),t.popin.loadAjaxPopin(r,u),!1)});t(".jsRatingReport",$ratingBlocPopin).click(function(){var n=t(this),r=n.parent(),i=n.parents("#ratingBlocPopin"),u=i.find(".jsSta"),f=t.fn.lnf(n.attr("href"));return(new Image).src=f,n.remove(),t(".jsReported",r).fadeToggle("fast"),i.addClass("deactivatedDetRating"),u.addClass("deactivatedRatingStar"),!1})};yt=function(){var n=t(".jsfplightItem",ii),i=t(".jsfpreviewImg",n);i.click(function(){var u=t(this).data("productid"),f=t(this).data("reviewid"),e=t(this).find(".ImgfpReview").attr("src"),i=t("#jsSwCarousel"),r;i.length&&i.carouselSwipe();r={addedClass:"popin container customerReview jsfplightPopin",callback:cr,data:{productId:u,reviewId:f,imageClicked:e},isOverflowHidden:!1};t.popin.loadAjaxPopin(n.data("reviewurl"),r)})};yt();hr.on("click",".jsCancel",function(){t(".jsCancel",hr).trigger("click")});pt=function(){var n=t(".jsFpStrikedAfter",f),i=t(".jsMainPrice",f);n.length&&i.width()+n.width()>t(".jsFpPriceBloc",f).width()&&t(".jsFpPriceBloc",f).removeClass("fpSmallPrice")};pt();var kr=function(){var n=t(".jsFpFormGarser",nt);n.on("click","li",function(i){var u=t(i.target),e=!u.hasClass("jsfpOverlayContent")&&!u.parents(".jsfpOverlayContent").length>0,r,f;e&&(r=t(this).find(".fpGarserCheckbox input[type=checkbox]"),r.get(0).click(),f=r.attr("data-garser-group-container-id"),t("li",n).not(this).find(".fpGarserCheckbox input[type=checkbox][data-garser-group-container-id="+f+"]").prop("checked",!1))})},dr=function(){var n=t(".jsFpFormGarser",gu);n.on("click","li",function(i){var u=t(i.target),e=!u.hasClass("jsfpOverlayContent")&&!u.parents(".jsfpOverlayContent").length>0,r,f;e&&(r=t(this).find(".fpGarserCheckbox input[type=checkbox]"),r.get(0).click(),f=r.attr("data-garser-group-container-id"),t("li",n).not(this).find(".fpGarserCheckbox input[type=checkbox][data-garser-group-container-id="+f+"]").prop("checked",!1))});n.on("click",".jsAssemblyCkb",function(){var n=t("#selectedAssemblyId")[0].value;n!=null&&n!=""&&(t("#fpAssemblyPrice")[0].innerHTML=t("#price_"+n)[0].value+_currency,t("#fpAssemblyTVA")[0].innerHTML=t("#TVA_"+n)[0].value.replace("("," ").replace(")",""))})},gr=function(n){return n&&(n=n.replace(",",".").replace("€","")),n},w=function(n,i){var r=t(".jsPerUnitPrice",f),u=r&&r.html(),e=n&&u&&i?u.replace(/[\d?,|.?\d?]+\s?€/g,n):n;e&&u&&r.html(e)},b=function(n,i){var r=t(".jsPackagingUnitPrice",f),u=r&&r.html(),e=n&&u&&i?u.replace(/[\d?,|.?\d?]+\s?€/g,n):n;e&&u&&r.html(e)},nu=function(n,i){var h=(n.data("price")||"").split(";"),f=(n.data("facility")||"").split(";"),ot=t(".jsPriceInfo",i),e=t("#fpFacility .price"),u=(n.attr("data-subscription-price")||"").split(";"),k=(n.attr("data-price")||"").split(";"),nt=n.attr("data-unit-price")||"",tt=n.attr("data-package-unit-price")||"",it=n.attr("data-subscription-unit-price")||"",rt=n.attr("data-subscription-cdav-unit-price")||"",ut=n.attr("data-package-subscription-cdav-unit-price")||"",ft=n.attr("data-package-subscription-unit-price")||"",o=(n.attr("data-subscription-price-cdav")||"").split(";"),r,et,c,s,d,a,v,g,y,p;h.length>1&&(r=t(".jsMainPrice",i),et=t(".jsPerUnitPrice",i),at&&u.length>2&&k.length>4?(c=t(".jsFpSubscriptionRadio:checked",l),c.length>0&&c.val()=="Subscription"?(r.html(u[1]),r.attr("content",gr(u[2])),s=t(".jsAddCdavWithSubscription",l),s.length>0&&s.prop("checked")?(w(rt,!0),b(ut,!0),d=s.is(":checked"),d&&(a=o.length>2&&o[1],v=o.length>2&&o[0],a&&r&&r.html(a),v&&r&&r.attr("content",v.replace(",",".").replace("€","").replace(/\s/g,"")))):(w(it,!0),b(ft,!0))):(r.html(h[0]),r.attr("content",gr(u[0])),w(nt,!0),b(tt,!0)),t(".jsClassicPrice",i).html(k[4].replace(" ","")),t(".jsSubscriptionPrice",i).html(u[0].replace(" ",""))):sr&&sr.length&&(g=t(".jsFpDedicatedDealRadio:checked",i).val(),g==="StandardPrice"&&r.html(h[0])),n.data("facility"),f.length>3&&e.length==3&&(e.eq(0).text(f[1]),e.eq(1).text(f[2]),e.eq(2).text(f[3])),y=n.data("promopay")||"",p=t(".jsPromoPay",i),y.length?p.attr("onclick","return window.open('"+y+"','fpPopup', 'scrollbar=yes,width=550,height=350');").show():p.hide())},tu=[],hi=function(){var n=t("option:selected",a),u=n.val(),v=t(f,du).find("[data-target-product='"+a.data("product")+"']"),o,h;if(n.data("offer")&&v.val(n.data("offer")),iu(u),o=n.data("color"),t("option",ft).show(),o&&t("option:not([value='"+o.replace(/;/g,"'],[value='")+"'], [value='-1'])",ft).hide(),t("li",ti).removeClass("disabled"),o&&t("li:not([data-sku='"+o.replace(/;/g,"'],[data-sku='")+"'])",ti).addClass("disabled"),e.hasClass("testAjaxVariant")){t.popin.showWaitingOverlay();h=t.inArray(u,tu)!=-1;h||tu.push(u);var p=u==-1,i=new FormData,l=t(this).data("action").split("/"),w="/"+l[1],b=t(this).data("product");i.append("productId",t(this).data("product"));i.append("isFpLight",l[3]);i.append("offerId",n.data("offer"));i.append("isProductTemplate",p);i.append("alreadyChecked",h);i.append("siteMapNodeId",t("#TechFormSiteMapNodeId").val());t(":input[type=checkbox]:checked",".jsFpFormGarser").each(function(){i.append("listGarsersId",this.id)});t.ajax({url:w,type:"POST",contentType:!1,processData:!1,data:i,dataType:"json",success:function(i){var o,v,h,l,e;i&&(o=t("#fpAjaxAssociatedProduct"),v=t(".jsSltSize",l).html(),i.SalesHtml&&t("#fpSales").replaceWith(i.SalesHtml),i.stockHtml&&(t("#fpStock").html(i.stockHtml),vt()),i.sellByHtml&&(t("#fpSellBy").html(i.sellByHtml),t(".jsOverlay",t("#fpSellBy")).each(function(){r(this)})),i.deliveryHtml&&(h=t("#fpShipping"),h.html(i.deliveryHtml),t(".jsOverlay",h).each(function(){r(this)}),nr()),i.paymentHtml&&(t("#fpPayment").html(i.paymentHtml),t(".jsOverlay",t("#fpPayment")).each(function(){r(this)})),i.garserHtml&&(nt.html(i.garserHtml),t(".jsOverlay",nt).each(function(){r(this)})),i.colFloatHtml&&(l=t("#fpAjaxColFloat"),t("#fpAjaxColFloat").html(i.colFloatHtml),e=t(".jsSltSize",l),s=t("#fpContent"),c=t(".jsColFloat",s),f=t("#fpBlocPrice"),g=t(".jsTriplePrice",c),e.length>0&&(e.html(v),e.val(u),e.change(hi),a=e),t(".jsOverlay",c).each(function(){r(this)})),i.colFloatHtml&&(uu(),di(),ki(),ot(),fu(),fi(),gi()),i.economyHtml?(t("#fpAjaxEconomy").show().html(i.economyHtml),t(".jsFpAjaxEconomy",f).show().html(i.economyHtml)):(t("#fpAjaxEconomy").hide(),t(".jsFpAjaxEconomy",f).hide()),i.associatedProducts&&o.html(i.associatedProducts),i.descriptionHtml&&t("#fpPrdDescBP").html(i.descriptionHtml),i.isMkp?o.hide():o.show(),nu(n,f),f&&f.length&&ri(f),kr(),dr(),pt(),(i.colFloatHtml||i.deliveryHtml)&&tr())},complete:function(){t.popin.hideOverlay()}})}else/true/i.test(n.data("mponly"))&&(y.location.href=a.data("mpurl")),nu(n,f),vt()};t('[selected="selected"]',a).prop("selected",!0);var iu=function(n){var r=" #"+(n!="-1"?n:ut),i=t("#fpCard"),u=i.prev(".fpCard"),f=i.add(u).add(u.prev(".fpTop")),e=i.data("url")||"/ajax/ProductPaymentFacilityInfoRwd.mvc/";i.load(e+ut+r,function(n){t(r,n).length?f.show():f.hide()})},nf=function(n){t.get(n,function(n){n&&(o.html(n),ci(),t("img[data-src]",o).lazyload(!0),yt())})},bt=function(n){tt=!0;t.get(n,function(n){n&&(t(".detMainRating",o).html(n),ci(),tt=!1,t("img[data-src]",o).lazyload(!0),yt())})},tf=function(n){t.get(n,function(n){n&&(h.html(n),ru())})},tt=!1,rf=function(){t(".jsGloTable",o).click(function(){if(!tt){tt=!0;var i=t(this).data("filtre"),r=t(".jsGloRatingDiv",o),u=r.data("action"),n=t(".jsRatingCount",o).data("selectedfilter"),f=t(".jsSortRating select",o).val();n==""?(n=n+i+";",t(".jsActive",r).removeClass("jsActive").addClass("jsInactive").addClass("gloRatingInactive"),t(this).addClass("jsActive").removeClass("jsInactive").removeClass("gloRatingInactive"),t(".selectedBvFilter"+i,o).addClass("selectedBvFilterA")):t(this).hasClass("jsInactive")?(n=n+i+";",t(this).addClass("jsActive").removeClass("jsInactive").removeClass("gloRatingInactive"),t(".selectedBvFilter"+i,o).addClass("selectedBvFilterA")):(n=n.replace(i+";",""),n==""?t(".jsInactive",r).addClass("jsActive").removeClass("jsInactive").removeClass("gloRatingInactive"):(t(this).removeClass("jsActive").addClass("jsInactive").addClass("gloRatingInactive"),t(".selectedBvFilter"+i,o).removeClass("selectedBvFilterA")));u=u+"&page=1&StarValueList="+n+"&ReviewOrdering="+f;bt(u)}})},ci=function(){var f=t(".jsGloRatingDiv",o),i=t(".jsBvPagination",o),u,r;t(".jsNoRating",o).length>0&&or.addClass("noRating");u=i.data("pagecount");r=i.data("currentpage");r==1?t(".prev",i).addClass("btdisable"):r==u&&t(".next",i).addClass("btdisable");t(".ratFB",o).click(function(){return n.open(t(this).attr("data-fbUrl"),"popup","scrollbars=yes, resizable=yes")});t(".jsYesRat, .jsNoRat",o).click(function(){var n=t(this),i=n.parent(),r=t(".jsYesRat, .jsNoRat",i);i.hasClass("disabled")||t.get("/UpdateCustomerReviewsUsefullness.html/"+n.hasClass("jsYesRat")+"/"+n.attr("data-review")+"/"+n.attr("data-external"),function(u){u&&(r.hide(),t(".jsRatRelevanceValidated",i).text(n.data("review-result")).fadeIn())})});t(".jsRatingReport",o.add(wu)).click(function(){var n=t(this),r=n.parent(),i=n.parents(".jsDetRating"),u=i.find(".jsSta"),f=t.fn.lnf(n.attr("href"));return(new Image).src=f,n.remove(),t(".reported",r).fadeToggle("fast"),i.addClass("deactivatedDetRating"),u.addClass("deactivatedRatingStar"),!1});t(".pagNum",o).click(function(n){var i=n.target||n.srcElement,r=this.getAttribute("data-action"),u=i.innerHTML;t(i).hasClass("prev")?u=parseInt(t(".on",t(this)).html())-1:t(i).hasClass("next")&&(u=parseInt(t(".on",t(this)).html())+1);t(i).hasClass("noClick")||(r+="&ReviewOrdering="+t(".pagRating select",o).val(),r+="&CurrentPage="+u,nf(r))});i.click(function(n){var r=n.target||n.srcElement,u=this.getAttribute("data-action"),f=i.data("currentpage"),e=t(".jsRatingCount",o).data("selectedfilter"),s=t(".jsSortRating select",o).val();t(r).hasClass("prev")&&!t(r).hasClass("btdisable ")?f--:t(r).hasClass("next")&&!t(r).hasClass("btdisable ")&&f++;u=u+"&CurrentPage="+f+"&StarValueList="+e+"&ReviewOrdering="+s;bt(u)});t(".jsSortRating select",o).bind("change",function(){var n=this.getAttribute("data-action"),i=t(".jsRatingCount",o).data("selectedfilter"),r=t(".jsSortRating select",o).value;n=n+"&page=1&StarValueList="+i+"&ReviewOrdering="+this.value;bt(n)});t(".jsSelectedBvFilter",o).click(function(){if(!tt){tt=!0;var r=t(this).data("filtre"),u=t(".jsGloRatingDiv",o),i=t(this).parent().data("action"),n=t(".jsRatingCount",o).data("selectedfilter"),f=t(".jsSortRating select",o).val();n=n.replace(r+";","");i=i+"&page=1&StarValueList="+n+"&ReviewOrdering="+f;t(this).removeClass("selectedBvFilterA");n==""?t(".jsGloTable",u).addClass("jsActive").removeClass("jsInactive").removeClass("gloRatingInactive"):t(".jsActive[data-filtre="+r+"]",u).removeClass("jsActive").addClass("jsInactive").addClass("gloRatingInactive");bt(i)}})},ru=function(){function i(n){t(".jsAnswerSent",n).hide();t(".jsAnswerSentError",n).hide()}function r(n,r){r?(t(".puFm",n).show(),t(".jsFAQPostAnswer",n).removeClass("hiddenCta"),t(".jsFAQCancelAnswer",n).removeClass("hiddenCta"),t(".jsFAQMoreAnswer",n).addClass("hiddenCta"),t(".jsFAQLessAnswer",n).addClass("hiddenCta"),t(".jsFAQAnswerCta",n).addClass("hiddenCta")):(t(".puFm",n).hide(),t(".jsFAQPostAnswer",n).addClass("hiddenCta"),t(".jsFAQCancelAnswer",n).addClass("hiddenCta"),t(".jsFAQMoreAnswer",n).removeClass("hiddenCta"),t(".jsFAQAnswerCta",n).removeClass("hiddenCta"),t(".jsFAQAnswer:not(.fpFAQAnswerClose)",n).length>1&&t(".jsFAQLessAnswer",n).removeClass("hiddenCta"));i(n)}t(".jsFpQAnswers",h).on("click",function(){t(".jsFpQAnswers",h).not(this).removeClass("expanded").next(".jsFpContent").slideUp();t(this).toggleClass("expanded");t(this).next(".jsFpContent").slideToggle()});t(".jsNoQuestion",h).length>0&&or.addClass("noQuestion");t(".plus, .moins",h).click(function(){var n=t(this),i=n.parent(),r=n.parents(".fpFAQIAns"),u=r.length?"/UpdateCustomerResponseUsefullness.html/":"/UpdateCustomerQuestionUsefullness.html/";i.hasClass("disabled")||t.get(u+n.hasClass("plus")+"/"+n.attr("data-review"),function(t){t&&(n.html(parseInt(n.html())+1),i.addClass("disabled"))})});t.fn.sortFAQ=function(n){var n=n||1,i=this[0].getAttribute("data-action");i+="&sortCriteria="+t(".fpFAQSort select",h).val();i+="&searchByKeyword="+t(".fpFAQSrc input[type=text]",h).val();i+="&currentPage="+n;tf(i)};t(".fpFAQSort select",h).bind("change",function(){t(this).sortFAQ()});t(".fpFAQSrc button",h).click(function(){t(this).sortFAQ()});t(".fpFAQSrc input[type=text]",h).bind("keydown",function(n){n.which===13&&t(".fpFAQSrc button",h).sortFAQ()});t(".pagNum",h).click(function(n){var i=n.target||n.srcElement,r=i.innerHTML;t(i).hasClass("prev")?r=parseInt(t(".on",t(this)).html())-1:t(i).hasClass("next")&&(r=parseInt(t(".on",t(this)).html())+1);t(i).hasClass("noClick")||t(this).sortFAQ(r)});t(".jsSniper",h).click(function(){var i=t(this),n=i.nextAll(".jsTarget:first");n&&(n.find("img[data-src]").lazyload(!0),i.add(n).toggle())});t.each(t(".jsFAQQuestion",h),function(n,i){t(".fpFAQAnswerClose",i).length>0&&t(".jsFAQMoreAnswer",i).removeClass("hiddenCta")});h.on("click",".jsFAQPostAnswer",function(){var n=t(this).parents(".jsFAQQuestion"),u=t(".jsPseudoRequiredError",n),f=t(".jsPseudoSCError",n),e=t(".jsAnswerRequiredError",n),o=t(".jsAnswerMaxLengthError",n),i=t(this).parents(".jsAnswerForm");if(!i)return null;var s=i.find(".jsAnswerTextArea"),h=i.find(".jsAnswerPseudoInput").val(),c=/\S/,l=!c.test(h),a=!/^[0-9a-zA-Z''-'\s]{1,40}$/.test(h),v=!c.test(s.val()),y=s.val().length>=500,p=!l&&!a&&!v&&!y;return(u.hide(),f.hide(),e.hide(),o.hide(),!p)?(l&&u.show(),a&&f.show(),v&&e.show(),y&&o.show(),!1):(t.ajax({url:i.data("action"),type:"POST",data:i.serialize(),success:function(){r(n,!1);i.find("textarea").val("");t(".jsAnswerSent",n).show()},error:function(){t(".jsAnswerSentError",n).show()}}),!1)});h.on("click",".jsFAQCancelAnswer",function(){var n=t(this).parents(".jsFAQQuestion");r(n,!1)});h.on("click",".jsFAQAnswerCta",function(){var u=t(this).parents(".jsFAQQuestion"),n=t.custo.getLogin(),f=!(n==null||typeof n.firstName=="undefined"||n.firstName===""),i;f?r(u,!0):(i=t(this).data("url"),window.open(i,"fpPopup","scrollbar=yes,width=1024"))});h.on("click",".jsFAQMoreAnswer",function(){for(var n=t(this).parents(".jsFAQQuestion"),u=n.data("increment"),f=t(".fpFAQAnswerClose",n),r=0;r<u;r++)t(f[r]).removeClass("fpFAQAnswerClose");f.length<=u&&t(this).addClass("hiddenCta");t(".jsFAQLessAnswer",n).removeClass("hiddenCta");n.addClass("fpFAQShowBestAnswer");n.data("increment",3);i(n)});h.on("click",".jsFAQLessAnswer",function(){var n=t(this).parents(".jsFAQQuestion");t(".jsFAQAnswer:not(.fpFAQBestAnswer)",n).addClass("fpFAQAnswerClose");n.removeClass("fpFAQShowBestAnswer");n.data("increment",2);t(this).addClass("hiddenCta");t(".jsFAQMoreAnswer",n).removeClass("hiddenCta");i(n)});var n=t(".jsFAQPagination",h),f=n.data("pagecount"),u=n.data("currentpage");u==1?t(".prev",n).addClass("btdisable"):u==f&&t(".next",n).addClass("btdisable");n.click(function(n){var r=n.target||n.srcElement,u=t(this).data("action"),i=t(this).data("currentpage");t(r).hasClass("prev")?i=i-1:t(r).hasClass("next")&&(i=i+1);t(r).hasClass("noClick")||t(this).sortFAQ(i)});t(".jsAnswerReport, .jsQuestionReport",h).click(function(){var n=t(this),r=n.parent(),i=n.parents(".jsFAQAnswer"),u;return i.length==0&&(i=r.find(".jsFAQQuestionText")),u=t.fn.lnf(n.attr("href")),(new Image).src=u,n.remove(),t(".reported",r).fadeToggle("fast"),i.addClass("deactivateFAQ"),!1});t(".jsPlus, .jsMoins",h).click(function(){var n=t(this),i=n.parent(),r=n.parents(".jsFAQAnswer"),u=r.length?"/UpdateCustomerResponseUsefullness.html/":"/UpdateCustomerQuestionUsefullness.html/",f=t(".jsPlus, .jsMoins",i);i.hasClass("disabled")||t.get(u+n.hasClass("jsPlus")+"/"+n.attr("data-review"),function(r){r&&(f.hide(),t(".jsFAQRatValidated",i).text(n.data("review-result")).fadeIn())})})},it=function(n){function u(n){t.ajax({type:"POST",url:n.attr("action"),data:n.add(t.contextPage.getTechForm()).serialize(),dataType:"json",success:function(n){n&&(t.nav&&t.nav.basket&&t.nav.basket.refreshArticlesCount(n.NbArticle),n.Script&&t.getScript({text:n.Script}))}})}var i=t("#btnAddUltdDelSub",n),r;if(t.custo&&t.custo.getCdav&&t.custo.getCdav()===!0)i.remove();else i.one("click",function(){var n=t(this.form);i.addClass("btAdded").val(i.data("lbladded")||i.val());u(n)});r=t(".cagnotte .btCdavBlue",n);r.one("click",function(){r.addClass("btCdavAdded");r.html(r.data("lbladded"));u(t(this.parentElement))})},uu=function(){var u=t(".jsColFloatCdav",f),h=t(".jsColFloatAlreadyCdav",f),e=t(".jsAddCdavBasket, .jsAddCdavWithVPBasket, .jsAddCdavWithSubscription",c),l=t(".jsAddCdavWithVP",g),a=t(".jsCDAVWithVPStep1",g),o=t(".jsCDAVWithVPStep2",g),s=t(".jsCDAVWithVPStep3",g),v=t(".jsMSGNotCDAV",g),n=t.custo.getLogin(),i=!(n==null||typeof n.firstName=="undefined"||n.firstName===""),r=t.custo&&t.custo.getCdav&&t.custo.getCdav();l.click(function(){a.fadeOut();i&&r?(s.fadeIn(1e3),v.hide()):o.fadeIn(1e3)});u.click(function(n){var t=n.target;t.tagName!="INPUT"&&t.tagName!="A"&&e.trigger("click")});e.click(function(){var n=t(".jsIsCdavAddToBasket",c);t(this).is(":checked")?(n.val(!0),s.fadeIn(1e3),o.hide()):n.val(!1)});i&&r?(h.show(),at&&lu(i&&r)):u.show()};t.init("SubscriptionToProduct",function(n){var i=t("#addForm");i.attr("action",n.action);t("input[name=basketId]",i).val(n.shoppingCartId);t("input[name=urlArticle]",i).val(n.urlArticle);i.submit()});lr=function(){var n=t(".jsAddCdavWithSubscription",l);subscriptionChangeLabels=function(n){var y=t(".jsPackVariantPrice",s),r=t(".jsOptionListVariantPrice option:selected",s),tt=t(".jsAddCdavWithSubscription",l),k=t(".jsColFloatAlreadyCdav.jsColFloatCdav",l),p=k&&k.length>0,d=t(".jsColFloatAlreadyCdav",l),it=d&&d.is(":visible"),c,a,v,o,h,u,e;if(p=p||it,c=tt.is(":checked")||p,y.length>0){var g=t(":radio[name=uniqueQuantity]:checked",s),nt=g&&g.parent(),i=nt&&t(".jsPackVariantPrice",nt),u,e;n=="Subscription"?(y.each(function(){c?t(this).attr("data-subscription-price-msg-cdav")&&t(this).html(t(this).attr("data-subscription-price-msg-cdav")):t(this).attr("data-subscription-price-msg")&&t(this).html(t(this).attr("data-subscription-price-msg"))}),c?(u=i&&i.attr("data-subscription-cdav-unit-price"),e=i&&i.attr("data-package-subscription-cdav-unit-price")):(u=i&&i.attr("data-subscription-unit-price"),e=i&&i.attr("data-package-subscription-unit-price"))):(y.each(function(){t(this).attr("data-price-msg")&&t(this).html(t(this).attr("data-price-msg"))}),u=i&&i.attr("data-unit-price"),e=i&&i.attr("data-package-unit-price"));w(u,!0);b(e,!0)}else r.length>0&&r.val()!="-1"?(n=="Subscription"?c?(a=r.attr("data-subscription-cdav-unit-price")||"",v=r.attr("data-package-subscription-cdav-unit-price")||""):(a=r.attr("data-subscription-unit-price")||"",v=r.attr("data-package-subscription-unit-price")||""):(a=r.attr("data-unit-price")||"",v=r.attr("data-package-unit-price")||""),w(a,!0),b(v,!0)):(o=t(".jsPerUnitPrice",f),h=t(".jsPackagingUnitPrice",f),n=="Subscription"?c?(u=o&&o.attr("data-subscription-cdav-unit-price"),e=h&&h.attr("data-package-subscription-cdav-unit-price")):(u=o&&o.attr("data-subscription-unit-price"),e=h&&h.attr("data-package-subscription-unit-price")):(u=o&&o.attr("data-unit-price"),e=h&&h.attr("data-package-unit-price")),w(u,!1),b(e,!1))};t(".jsFpSubscriptionRadio",l).click(function(){var i=t(this).val(),u=i&&i=="Subscription",e;if(u){if(t("#addForm").attr("action",t("#fpSubscriptionAddBsk").attr("data-action")),t(".jsNotSubscriptionZone",f).each(function(){t(this).hide()}),t(".jsSubscriptionZone",l).fadeIn(),t(".jsOverlay input:checked",nt).prop("checked",!1),nt.addClass("fpHide"),dt(i),subscriptionChangeLabels(i),n.length>0){var o=t(".jsColFloatAlreadyCdav.jsColFloatCdav",l),r=o&&o.length>0,s=t(".jsColFloatAlreadyCdav",l),h=s&&s.is(":visible");r=r||h;e=n.is(":checked");ht(e||r)}}else nt.removeClass("fpHide"),t("#addForm").attr("action",t("#fpAddBsk").attr("data-action")),t(".jsSubscriptionZone",l).hide(),t(".jsNotSubscriptionZone",f).each(function(){t(this).fadeIn()}),dt(i),subscriptionChangeLabels(i);setAddToBasketFormAction(u)});setAddToBasketFormAction=function(n){var i=t(".jsMainForm",c),r;r=n?"/BasketUC.mvc/AddSubscriptionProduct":"/ShoppingCartUC.mvc/RWDUpdateProductSheetFormToAddProductOrOfferToShoppingCartFromAjax";i&&i.length>0&&r&&i.attr("action",r)};n.change(function(){var n=t(".jsFpSubscriptionRadio:checked",l),i=t(".jsColFloatAlreadyCdav.jsColFloatCdav",l),r=i&&i.length>0;n.length>0&&n.val()=="Subscription"&&!r&&(isChecked=t(this).prop("checked"),ht(isChecked));subscriptionChangeLabels(n.val())});n.length>0&&n.prop("checked")&&(ht(!0),subscriptionChangeLabels("Subscription"))};ri=function(n){var v=t(".jsDedicatedDealPrice",n),y=t(".jsStandardPrice",n),o=t(".jsProductPrice",n),p=t(".jsDedicatedDealConnectZone",n),w=t(".jsCdavDedicatedDeal",n),r=t(".jsDedicatedDealZone",n),s=t(".jsNotDedicatedDealZone",n),h=t(".jsFpDedicatedDealRadio",n),c=t(".jsDedicatedDealStandardPrice",n),l=t(".jsFpDedicatedDealRadio[value='StandardPrice']",n),b=t(".jsFpDedicatedDealRadio[value='DedicatedDealPrice']",n),e=t(".jsAddDedicatedDeal",n),d=t(".jsDedicatedDealEco",n),a=t(".jsIsDedicatedDealWithCdav",n),u=t(".jsDealAddCdavBasket",n),k=function(i){var u=i=="DedicatedDealPrice"?v.html():y.html(),r,f;o.html(u);o.attr("content",u.replace(",",".").replace("€","").replace(/\s/g,""));r=t("#fpZnPrdMain .jsEcoBlk>span");r&&r.length&&(f=t(".jsFpDedicatedDealRadio:checked",n).data("eco"),r.html(f))},f,i;h.change(function(){var i=t(".jsFpDedicatedDealRadio:checked",n).val();i&&(k(i),i=="DedicatedDealPrice"?(r.fadeIn(),s.hide()):(u.prop("checked",!1),a.val(!1),r.hide(),s.fadeIn()))});u.click(function(){a.val(t(this).is(":checked"))});e.click(function(){var i=f(),n=!i.hasCdav&&!u.is(":checked");return(r.handleCustomErrors(n),n)?!1:t(this.form).addToBasket(t("form[name=associatedProductsForm], form[name=garserProductsForm], form[name=variantForm], form[name=AssemblyProductsForm]"))});f=function(){var n=t.custo.getLogin(),i=n==null||typeof n.firstName=="undefined"||n.firstName==="";return{isNotLogged:i,hasCdav:!i&&t.custo&&t.custo.getCdav&&t.custo.getCdav()===!0}};i=f();p.toggle(i.isNotLogged);w.toggle(!i.hasCdav);i.hasCdav?c.addClass("fpDedicatedDealDisabled"):c.removeClass("fpDedicatedDealDisabled");l.prop("disabled",i.hasCdav);l.prop("checked",!i.hasCdav);b.prop("checked",i.hasCdav);h.trigger("change");t.fn.handleCustomErrors=function(n){var i=t(".jsAddDedicatedDeal",this),r=t(".variantMsg",this);n==!0?(r.fadeTo("fast",1),i.addClass("clickDisabled")):n==!1&&(r.fadeTo("fast",0),i.removeClass("clickDisabled"))};e.on("mouseover",function(){var n=f();r.handleCustomErrors(!n.hasCdav&&!u.is(":checked"))});e.on("mouseout",function(){r.handleCustomErrors(!1)})};t(".jsFpColFloatGarserBloc",f).click(function(n){var i=n.target;i.tagName!="INPUT"&&i.tagName!="A"&&t("input[type='checkbox']",t(this)).trigger("click")});kr();dr();pt();t("#bc .jsBack a").click(function(){if(y.referrer&&RegExp(n.location.hostname.concat("(?!.*/r2-).*")).test(y.referrer.split("?")[0])&&n.history.length>1)return n.history.go(-1),!1});ui=lt.data("action");ui&&n.setTimeout(function(){vt=function(){var n=ui+ut+" #"+(a.val()&&a.val()!=="-1"?a.val():ut);lt.load(n,function(){lt.css("opacity","0").html()&&lt.fadeTo("slow","1")})};vt()},5e3);a.change(hi);y.location.hash&&(ar=y.location.hash.replace("#",""),vr=a.find("option").filter(function(){return ar===t(this).text()}).attr("selected","selected"),vr.length&&hi());ot=function(n){var i=n||{};i.offersListContent=i.offersListContent||t("#offerOrCds");i.offersListBlock=i.offersListBlock||{};i.highlightSellerId=i.highlightSellerId||-1;var u=i.offersListContent,r=u.data("url"),f=t(".jsFpOffer",fpContent);i.highlightSellerId!=-1&&(r=r+"&sellerIdOfferExpressHighlight="+i.highlightSellerId);r&&t.ajax({url:r,cache:!1,dataType:"json",type:"GET",success:function(n){var e,r;if(n)if(n.RedirectUrl!=null){if(uf(n.RedirectUrl))return;window.location.href=n.RedirectUrl}else!n.html&&f.length?f.toggle(150):(u.append(n.html),e=i.offersListBlock,e.length&&(e.removeClass("dn"),r=t("#expressLegalNotice"),r.length>0&&r.html()==""&&(r.append(n.htmlLegalNotice),r.removeClass("dn"))))}})};ot();var uf=function(n){var i,t;if(n=n.toLowerCase(),i=n.indexOf("?"),i>0){var f=n.substr(0,i),e=n.substr(i+1),s=f.substr(f.lastIndexOf("/"));if(e&&s){var u=e.split("&"),o="idOffre=".toLowerCase(),r="";for(t=0;t<u.length;t++)u[t].indexOf(o)==0&&(r=u[t].substr(o.length));if(r!=""){if(ff(r))return!0;ef(r)}}}return!1},ff=function(n){var u,i,r;if(sessionStorage&&JSON&&(u=sessionStorage.getItem("cds.offers")||"[]",u&&(i=JSON.parse(u),i&&t&&t.isArray(i)&&i.length>0)))for(r=0;r<i.length;r++)if(i[r]==n)return!0;return!1},ef=function(n){var r,i;sessionStorage&&JSON&&(r=sessionStorage.getItem("cds.offers")||"[]",r&&(i=JSON.parse(r),i&&t&&t.isArray(i)||(i=[]),i.push(n),sessionStorage.setItem("cds.offers",JSON.stringify(i))))},fu=function(){var f=t("#offerOrCdsExpress").closest(".jsOffersListBlock"),e=t("#offerOrCdsExpress"),i=t("#expressSellersHighlight"),r=t.cookies.get("SitePersoCookie").split("__"),n=r[r.indexOf("ExpressGlobalSellerId")+1],u;i.length&&(u=i.val().split(";"),n&&t.inArray(n,u)>-1&&ot({offersListBlock:f,offersListContent:e,highlightSellerId:n}))};fu();fi=function(){ot({offersListBlock:t("#nearestRimOfferBlock"),offersListContent:t("#nearestRimOffer")})};fi(),function(){var a=t(".fpMainImg",v),h=(/\/(\d+x\d+)\//ig.exec(t("a",a).attr("href"))||[])[1],u=t(".jsSmallImg",v),y=t([]),i,r=t(".fpZoomPic img",v),f=t(".jsNextImage",v),o=t(".jsPreviousImage",v),s=function(n){var i=u.attr("src").match(/\d{3}x\d{3}/)[0];n!=null&&(t("source",u.parent()).each(function(){var t=this.getAttribute("srcset").match(/\d{3}x\d{3}/)[0];this.setAttribute("srcset",n.replace(/\d{3}x\d{3}/,t))}),u.attr("src",n.replace(/\d{3}x\d{3}/,i)))},b=u.length&&u.attr("src")?u.attr("src"):"",p,c,w,l;y=a.zoom(t("#fpZoomWindow")).setBigImg(b.replace(/\d{3}x\d{3}/,h));p=t(".fpZoom, .fpMainImg",v).data("zoommethod");(!p||t.isTouch())&&t(".fpZoom, .fpMainImg, .jsSmallImg",v).click(function(){var i=t(this).parent().data("zurl")||"/Product/Zoom/"+ut+"/0.html";return n.open(i,"zoom","scrollbar=yes")});t(".fpZoomPic",e).on("mouseover touchstart",function(){t(".fpZoomPic",e).removeClass("act");var n=t(this);n.addClass("act");i=t("img",n).attr("src");i&&(s(i),y.setBigImg(i.replace(/\d{3}x\d{3}/,h)),c())});c=function(){r[0].src==i?o.addClass("arrowLowOpacity"):o.removeClass("arrowLowOpacity");r[r.length-1].src==i?f.addClass("arrowLowOpacity"):f.removeClass("arrowLowOpacity")};t.isTouch()?r.length>1&&(f.show(),o.show()):t(".fpImgLightMain").hover(function(){r.length>1&&(f.show(),o.show())},function(){f.hide();o.hide()});w=function(n){for(var t=0;t<r.length;t++)if(r[t].src.replace(/\d{3}x\d{3}/,h)===n.replace(/\d{3}x\d{3}/,h))return t};l=function(n){var u=w(t(".jsSmallImg").attr("src"));u+n<r.length&&u+n>=0&&(t(".fpZoomPic")[u].classList.remove("act"),t(".fpZoomPic")[u+n].classList.add("act"),i=r[u+n].src,s(r[u+n].src),c())};f.click(function(){l(1)});o.click(function(){l(-1)}),function(){var r,n=t(".jsColName",e);t("ul.jsPiColor, ul.jsPiHTColor",e).hover(function(){i||(i=u.attr("src"));r=n.html()},function(){t(".jsColName",t(this).prev()).html(r);s(i)}).on("mousemove","li",function(){var i=t(this),r=i.parent();s(t("img",i).attr("src"));i.is(".disabled")?n.html(r.data("lbl-disabled")):n.html(i.data("lbl-color"))})}(),function(){var n=t(".jsFpImageVariationGroup",e),r=i?i:u.attr("src");t(t(".jsFpVariationGroupOption"),n).hover(function(){var i=t(this),r=t("img",i),n=r.attr("src");n!=null&&n!=""&&s(n)},function(){s(r)})}()}(),function(){t(".fpVariationGroup ul.hVariationGroup li",e).hover(function(){var n=t(this).text(),i=t(this).closest(".jsFpVariationGroup"),r=t(".jsVariationName",i);r.html(n)},function(){var n=t(this).closest(".jsFpVariationGroup"),i=t(".jsActiveVariationGroupProperty",n).text(),r=t(".jsVariationName",n);r.html(i)}).on("mousemove",function(){var n=t(this).text(),i=t(this).closest(".jsFpVariationGroup"),r=t(".jsVariationName",i);r.html(n)})}();t(".jsGomette",v).click(function(){var f=t(this),n=f.next().show(),i=t(".ecoBlk",v).hide(),r=n.data("bg"),u;r?(u=new Image,u.src=r,t(u).load(function(){n.css("background-image","url('"+r+"')").data("bg","").removeClass("dn");i.hide()})):(n.removeClass("dn"),i.hide());n.show().one("click",function(){return n.addClass("dn"),i.removeClass("dn").show(),!1});return!1});t(".fpZnPrd",s).one("mouseenter",function(){t.getScript("http://apis.google.com/js/plusone.js")});t(".jsOverlay",s).each(function(){r(this)});t(".jsStarOverlay",e).each(function(){var n=t(this);i(n,t(".fpOverBlk",n.parent()))});t(".jsCountdown, .countdown",e).countDown({callbackEnd:function(){var i=t(this),n;i.is(".jsEndStress")&&(n=i.parent(),n.next().show(),n.remove(),t(".jsStressDelivery").html(""))}}),function(){var n=t(".jsProgressBg",e);n.animate({width:n.data("width")},2e3)}();ni.change(function(n){var f=ni.data("loader")||!1,i;f&&(t.popin.isWaitingOverlay()?t.popin.showWaitingOverlay():t.popin.showOverlay({loader:!0}));var o=t(this),r=n.target,e=t("input:checked",r),u=t("option:selected",r).data("action")||e.parents("li").data("action");u?y.location.href=u:(i=t("input[id*='PackagingId']"),i.val(r.value),i[0].form.submit())});ft.change(function(){var n=a.val(),i=n&&n!="-1"?"#"+t("option:selected",a).text():"";y.location.href=t("option:selected",t(this)).data("action")+i});t(".jsShowVariant",s).click(function(){t(this).addClass("fpHiddenVariant");t(".jsHiddenVariant",s).removeClass("fpHiddenVariant").css({opacity:0}).animate({opacity:1},800)});t(".jsHideVariant",s).click(function(){t(".jsHiddenVariant",s).addClass("fpHiddenVariant");t(".jsShowVariant",s).removeClass("fpHiddenVariant").css({opacity:0}).animate({opacity:1},800)});t(".jsShowHVariant",c).click(function(){t(this).addClass("fpHiddenVariant");t(".jsHiddenVariant",c).removeClass("fpHiddenVariant").css({opacity:0}).animate({opacity:1},800)});t(".jsHiddenHVariant",c).click(function(){t(".jsHiddenVariant",c).addClass("fpHiddenVariant");t(".jsShowHVariant",c).removeClass("fpHiddenVariant").css({opacity:0}).animate({opacity:1},800)});t(".jsShowRating",c).click(function(){var n=t(this).parent();n.hide();n.prev().show()});t(".jsHideRating",c).click(function(){var n=t(this).parent();n.hide();n.next().show()});t(".jsShowUsedProductComment",er).click(function(){var n=t(this).parent();n.hide();n.prev().show()});t(".jsHideUsedProductComment",er).click(function(){var n=t(this).parent();n.hide();n.next().show()});t("li",ti).click(function(){var n=a.val(),i=n&&n!="-1"?"#"+t("option:selected",a).text():"";t(this).hasClass("jsHiddenHVariant")||t(this).hasClass("jsShowHVariant")||(y.location.href=t(this).data("action")+i)});t(".fpTopGar",e).click(function(n){var i=n.target;i.tagName=="INPUT"&&t("input[type=checkbox]",".fpTopGar").not(i).removeAttr("checked")});iu(a.val()||"-1");t(".fpIpdtMore",s).click(function(){t("p",t(this).toggleClass("open")).slideToggle("fast")});t("#fpIndP .jsSltSize, #fpAssMain .jsSltSize").change(function(){var u=t("option:selected",this),i=(u.data("price")||"").split(";"),n=t(this).parents("div:eq(1)"),r=t(".jsPriceInfo",n);t(".price",n).html(i[0]);t(".stroken",n).html(i[1]);i[2]?t(".fpEco, .ecoBlk",n).html(i[2]).removeClass("dn").show():t(".fpEco, .ecoBlk",n).hide();r&&u.val()==="-1"?r.removeClass("dn"):r.addClass("dn")});t(".jsSltSize, .jsSltColor, .jsSltCond",et).change(function(){var i=t("option:selected",this),f=(i.data("price")||"").split(";"),n=t(this).parents("li"),r=t(".jsPriceInfo",n),e=i.data("imgsrc"),o=n.index(),u=t(".jsAssoPrdtPic >li:eq("+o+")",et);t(".price",n).html(f[0]);t(".stroken",n).html(f[1]);r&&i.val()==="-1"?r.removeClass("dn"):r.addClass("dn");t("input[type=checkbox]",n).prop("checked",!0);u.length&&(e&&t("img",u).attr("src",e),i.val()!=-1&&t(".jsAssoAdded",u).removeClass("dn"))});var rt=t("#fpBulletPointReadMore"),k=t(".jsButtonReadMore",rt),li=t(".jsFpReadMoreAndLessImg",rt),kt=t(".jsFpCacheTransparent",rt),of=t(".jsFpBulletPointMore li",rt).length,sf=k.data("hide"),eu=k.data("showall");t(".jsFpBulletPointMore",rt).hide();of==0&&(kt.hide(),li.hide(),k.hide());k.click(wi);kt.click(wi);t(".fpDescBun + table tr:nth-child(n+11)",s).hide();t(".fpBtnBun",s).click(function(){$t=t(this);t("tr:nth-child(n+11)",$t.prev("table")).toggle();t("span",$t).toggle()});rf();ci();ru();t("#fpSimTab").click(function(n){var i=t(n.target);return i.siblings().addClass("inact").removeClass("active"),i.removeClass("inact").addClass("active"),t(".fpSimilar",t(n.currentTarget).next()).addClass("dn").eq(i.index()).removeClass("dn").find("img[data-src]").lazyload(!0),!1});t("img[data-src]",s).lazyload();t.storage.set("fpBack","1");ei=t("#caroussel");ei.length&&ei.carouselSwipe();ki(),function(){var n=t("#fpSOForm form"),i=t("input[type=text]",n),r=t("#fpSOFormRedesign")||n;t.nav.session.isAuthenticate()&&i.val(t.custo.getEmail());n.submit(function(){if(i.val().length>1){var u=t(this);t.ajax({type:"GET",url:u[0].action,dataType:"json",data:u.serialize(),success:function(i){i&&(t.getScript({text:i.script}),i.success?r.html(i.message):(t("#fpSOFormError").html(i.message),t(".jsEmailFormAlertIcon",n).show()))}})}return!1})}(),function(){var n=t("#fpAlertForm form"),i=t("input[type=text]",n);t.nav.session.isAuthenticate()&&i.val(t.custo.getEmail());n.submit(function(){if(i.val().length>1){var n=t(this);t.ajax({type:"GET",url:n[0].action,dataType:"json",data:n.serialize(),success:function(n){n&&(t.getScript({text:n.script}),t("#fpAlertMailRes").html(n.message))}})}return!1})}();di();gi();t.addToBasketValidate.push(function(n){var i=t("select.jsOneCkAddr",n),r=!0;return i.length>0&&i.val()==-1&&(i.addClass("selMsgVar"),r=!1),r});nr();tr();t.init("oneCkRedirect",function(n){var i=t("#oneCkForm")[0];i.action=n.action;i.basketId.value=n.shoppingCartId;i.urlArticle.value=n.urlArticle;i.submit()});window.validateSelection=function(n){var r=n?n:t(".jsMainForm",e),i={isValide:r.checkFormErrors(t(".jsSltSize, .jsSltColor, .jsSltCond",e)),pSize:"",pColor:"",pCond:""};return i.isValide&&(i.pSize=a.val(),i.pColor=ft.val()||ft.data("value"),i.pCond=ni.val(),i.price=t(".fpPrice",f),i.ulrMkp=t("option:selected",a).attr("data-productamp")||!1,i.pSize?i.sku=i.pSize:i.pColor?i.sku=i.pColor:i.pCond&&(i.sku=i.pCond)),i};t.init("offerOverlays",function(){var n=t("#offersListBlock");gt(n)});t.init("offerOverlaysExpress",function(){var n=t("#offersListBlockExpress");gt(n)});t.init("offerOverlaysRim",function(){var n=t("#nearestRimOfferBlock");gt(n)});yr=t(".callCenter .innerCallCenter",s);yr.on("click",function(n){var i=t(this).parent().data("url");t(n.target).closest("a").length||window.open(i,"_blank")});t.custo&&t.custo.addListenerName(function(){uu();f&&f.length&&ri(f)});at&&(lr(),u());t(window).load(function(){s.initMabayaCarrousel()});t(".jsToolTip",s).toolTip();var st=function(n,i){var u=!1,f,r;if(t.cookies.get("ExpressGlobalSellerId","__")==n&&i==1)for(u=!0,f=window.location.href.slice(window.location.href.indexOf("?")+1).split("#"),r=0;r<f.length;r++)if(f[r].toLowerCase()=="expressorigin"){u=!1;break}return u},ai=function(n,t){undefined!==n&&n.length&&(n.removeClass(),t&&n.addClass("dn"))},vi=function(n,t,i,r){undefined!==t&&t.length&&t.removeClass().addClass(r);undefined!==n&&n.length&&n.removeClass().addClass(i)},ou=function(n,i){t(i).length&&t(n).length&&t(n).val(t(i).val())};if(function(){var n=t("#shippingBlocOfferSellerId").length&&t("#shippingBlocOfferIsExpressHighlight").length&&st(t("#shippingBlocOfferSellerId").val(),t("#shippingBlocOfferIsExpressHighlight").val());ai(t("#expressShippingPrice"),n);ai(t("#expressShippingDelay"),n);ai(t("#expressShippingHighlight"),!n)}(),function(){if(t("#ProductFormData_ProductPostedForm_RedirectToBackOnAddToBasket").length&&t("#ProductFormData_ProductPostedForm_IsExpressHighlightOffer").length){var n=t("#ProductFormData_ProductPostedForm_SellerId").length&&st(t("#ProductFormData_ProductPostedForm_SellerId").val(),t("#ProductFormData_ProductPostedForm_IsExpressHighlightOffer").val());t("#ProductFormData_ProductPostedForm_RedirectToBackOnAddToBasket").val(n?"True":"False")}}(),function(){var n=t("#offersListBlock"),i;n.length&&t("#additionalOfferBlockOfferExpress").length&&t("#additionalOfferBlockOfferExpress").val()==1&&(i=t("#additionalOfferBlockOfferSellerId").length&&t("#additionalOfferBlockOfferExpressHighlight").length&&st(t("#additionalOfferBlockOfferSellerId").val(),t("#additionalOfferBlockOfferExpressHighlight").val()),i||n.removeClass().addClass("dn"))}(),function(){if(t("#shoppingListBlockOfferExpress").length&&t("#shoppingListBlockOfferExpress").val()==1){var n=t("#shoppingListBlockOfferSellerId").length&&t("#shoppingListBlockOfferExpressHighlight").length&&st(t("#shoppingListBlockOfferSellerId").val(),t("#shoppingListBlockOfferExpressHighlight").val());n?vi(t("#fpWlBloc"),t("#shoppingListBlock"),"","dn"):vi(t("#fpWlBloc"),t("#shoppingListBlock"),"dn","cdsExpressWLBloc")}else vi(t("#fpWlBloc"),t("#shoppingListBlock"),"","dn")}(),function(){if(t("#ProductFormData_ProductPostedForm_IsExpressOffer").length&&t("#ProductFormData_ProductPostedForm_IsExpressOffer").val()==1){var n=t("#ProductFormData_ProductPostedForm_SellerId").length&&t("#ProductFormData_ProductPostedForm_IsExpressHighlightOffer").length&&st(t("#ProductFormData_ProductPostedForm_SellerId").val(),t("#ProductFormData_ProductPostedForm_IsExpressHighlightOffer").val());ou("#fpAddBsk",n?"#btAddMsgAddToBasket":"#btAddMsgAdd")}else ou("#fpAddBsk","#btAddMsgAddToBasket")}(),oi=t("#cAjaxRentOfferZone"),oi&&(si=oi.data("action"),si&&t.ajax({url:si,type:"GET",dataType:"json",success:function(n){n&&(t("#cAjaxRentOfferZone").html(n.Data),u())}})),wt=t("#fpOfferRentBlock"),wt&&u(),wt=t("#fpOfferRentBlock"),wt&&u(),pr=function(){var n=t(c.children("div")).not("#deliveryStress").not("#fpBlocPrice"),i,r;if(n!=null&&!(n.length<1))for(i=0;i<n.length;i++)r=n[i],t(r).fadeOut(1e3,function(){t(r).addClass("fpHide")})},p=t("#bOpXy"),p.length){var su=p.data("storagekey"),hu=p.data("sku").toString(),hf=p.data("masquecss"),cf=p.data("url"),d=JSON.parse(window.localStorage.getItem(su));if(d&&d.xProduct&&d.yProducts&&d.backOnAddUrl)if(t.inArray(hu,d.yProducts)!=-1){var lf=d.xProduct,af=d.backOnAddUrl,vf={skuX:lf,skuY:hu};t.ajax({type:"POST",url:cf,data:vf,dataType:"json",success:function(n){if(n.html){var t='<div class="'+hf+'"><\/div>';f.addClass("disablefTopPrice").append(t);p.append(n.html).find(".jsBackOnAddLink").attr("href",af);pr();p.slideToggle(1e3)}}})}else window.localStorage.removeItem(su)}wr=function(){var n=t(".jsOrdOverlayerCagnotte",e);n.length>0&&t.ajax({url:n.data("url"),type:"GET",success:function(i){n.html(i);t(".jsOverlay",n).each(function(){r(this);it(this)})}})};wr();br=function(){var n=t("#descContent > div.regBloc"),i;n.length>0&&(n.css("right","0"),i=$header.css("position")=="fixed"?$header.height():0,t.fn.UpdateBlocScroll(n,bu,ku,20,i+90,"fpDisplayRegBloc","fpHideRegBloc",!1,"init"))};t&&t.cookies&&(t.cookies.isSiteVersionActive("3011.1")||t.cookies.isSiteVersionActive("3010.1"))&&br();pu(t("#addForm"))});t.init("lld",function(){var n=t("#fpBlocPrice"),i=t("#fpRental"),f=t(".jsFpRentalRadio",i),e=t(".jsFpRentalRadio:checked",i),o=i.length>0;if(o){function r(r){var f=t(".jsFpRentalPriceBloc",n),e=t(".jsFpPurchasePriceBloc",n),h=t(".fpBtnAddRental",n),c=t(".fpBtnAddBasket",n),o=t(".jsFpRentalReinsuranceBloc",n),u,s;r[0].value=="Rental"?(e.hide(),f.fadeIn(800),o.slideDown(500)):(f.hide(),e.fadeIn(800),o.slideUp(500));u=r.closest(".jsFpRentalChoice");u.addClass("fpSelectedRentalChoice");s=t(".jsFpRentalChoice",i).not(u);s.removeClass("fpSelectedRentalChoice")}r(e);f.change(function(){r(t(this))});u()}});t.init("fpBSellers",function(){var i="cdiscount.com",n="";t("#BSZone")!=null&&t("#BSZone").hasClass("fpSOBSZone")&&(n=" fpSOBSZone"),function(t){(t==""||t&&t.indexOf(i)==-1)&&(document.getElementById("BSZone").className="fpBSZone"+n)}(document.referrer)});t.init("productEmptyMail",function(){function n(){for(var t=document.getElementById("emailclear").value,i="",n=0;n<t.length;n++)i+=String.fromCharCode(t.charCodeAt(n)+1);document.getElementById("email").value=i}$form=t("form","#fpSOForm");$form.on({submit:function(){n()}});t("#emailclear").on({keydown:function(n){if(n.which===32)return!1},change:function(){this.value=this.value.replace(/\s/g,"")}})});t.init("shippingGeoloc",function(){function f(n){var e=t("#fpShippingList"),s=e.data("action"),h=e.data("prefered-address-url"),o=t("#deliveryStress"),f=t(".jsCustomRadio",n),c=f&&f.attr("data-addressId")?f.attr("data-addressId"):"",l=t(".jsGeolocPopinZipCode",u).val(),a=f&&f.attr("data-zipcode")?f.attr("data-zipcode"):l,v=f.attr("data-city");t.popin.showBlockWaitingOverlay({context:t(".jsGeolocPopin"),loaderScaling:.7});t.ajax({url:h,type:"POST",data:{addressId:c,postalCode:a,city:v},dataType:"json",success:function(n){t.popin.removeBlockWaitingOverlay({context:t(".jsGeolocPopin")});n.zipcodeErrorMessage?t(".jsErrorZipCode").html(n.zipcodeErrorMessage).show():(t(".jsErrorZipCode").hide(),t(".jsGeolocPopin .jsCancel",u).click(),getDefaultShippingPlaceHtml(),t.ajax({url:s,type:"GET",success:function(n){if(n&&n.hasOwnProperty("deliveryStress")){var u=t(n.deliveryStress);u.is(".jsOverlay")&&(i(t(".fpLk:first",u),t(".fpOverBlk",u)),i(t(".jsFpClickLk:first",u),t(".jsfpOverlayContent",u)));t(".jsCountdown",o).addClass("jsRemoved");t(".jsCountdown",u).countDown({callbackEnd:function(){var i=t(this),n;i.is(".jsEndStress")&&(n=i.parent(),n.next().show(),n.remove(),o.html(""))}})}n&&n.hasOwnProperty("deliveryShippingInfo")&&(t(".jsShippingMode, .jsStressDelivery",e).remove(),e.prepend(n.deliveryShippingInfo),n.isDeliveryStressMoved?e.prepend(u):o.html(u),t(".jsOverlay",e).each(function(){r(this)}))}}))}})}var n=t("#fpShippingCustomer"),u=t("body");(getDefaultShippingPlaceHtml=function(){t.ajax({url:n.data("url"),type:"GET",success:function(t){n.html(t)}})})();n.on("click","a",function(){var i=n.data("popin-url"),r;i&&(r={addedClass:"geolocPopin jsGeolocPopin",isPopinCenter:!0,callback:selectDefaultAddress},t.popin.loadAjaxPopin(i,r))});selectDefaultAddress=function(){var i=t.cookies.get("SitePersoCookie").split("__"),u=i.indexOf("AddressId")==-1,r=i[i.indexOf("AddressId")+1],n;u||(t(".jsCustomRadio").checked=!1,n=r?t(".jsCustomRadio[data-addressId="+r+"]"):undefined,n&&n[0]&&(n[0].checked=!0,t(".jsGeolocPopinZipCode")[0].value=""))};u.on("click",".jsGeolocPopinZipCodeUpdate",function(){f(this)}).on("keypress",".jsGeolocPopinZipCode",function(n){var t=n.keyCode?n.keyCode:n.which;t=="13"&&(f(this),n.preventDefault())})});window.onpageshow=function(n){n.persisted&&window.location.reload()};t.init("eyeGlasses",function(i){var r=t.extend({displayEyeGlassesTryOnPopinUrl:"",fitmixApiKey:"",fitmixContainerDivName:"",productSku:""},i),h=n.document,o=t("#fpZnPrdMain"),s=t(".jsFpThumbnailsWrapper",o),u=t(".jsEyeGlassesTryOnLauncher",s),f=function(){var n=function(){u!==null&&u.removeClass("fullyTransparent")};window.addEventListener?window.addEventListener("fitmixLoaded",n,!0):window.attachEvent&&window.attachEvent("fitmixLoaded",n)},e;u!==null&&(document.readyState==="complete"?f():window.addEventListener?window.addEventListener("load",f,!1):window.attachEvent&&window.attachEvent("onload",f));e=function(){var u,n,i;try{u=FitMix.createWidget(r.fitmixContainerDivName,{apiKey:r.fitmixApiKey},function(){u.setFrame(r.productSku)});n=s_gi(s_account);n.linkTrackVars="events";n.linkTrackEvents="event337";n.events="event337";n.tl(this,"o","DisplayEyeGlassesEligibilityTryOnPopin")}catch(f){i=t("#popin");i.length&&t(".jsCancel",i[0]).trigger("click")}};u.on("click",function(){var n={addedClass:"fpEyeGlassesTryOnPopin jsFpEyeGlassesTryOnPopin",callback:e,data:{sku:r.productSku},isOverflowHidden:!1};t.popin.loadAjaxPopin(r.displayEyeGlassesTryOnPopinUrl,n)})})}(window,window.jQuery||window.cm),function(n,t){t.init("innersense",function(){var n=t("#fpZnPrdMain"),i=null;n.on("click",".jsBtShowInnersense",function(){var r=t("#innersenseViewer"),u=r[0].contentWindow?r[0].contentWindow:r[0].contentDocument.defaultView,f=t(".jsPictureZone",n);f.hide();r.addClass("show");i||t.get(r.data("css"),function(n){i=new Blob([n],{type:"text/css"});u.postMessage({type:"init",backgroundShade:{shadeTop:{r:255,g:255,b:255},shadeDown:{r:255,g:255,b:255}},hiddenMenu:!1,blobCSSDefault:i},"*")})});n.on("click",".jsFpZoomPic",function(){var i=t("#innersenseViewer"),r=t(".jsPictureZone",n);i.removeClass("show");r.show()})})}(window,window.jQuery||window.cm),function(n,t){t.init("ShoppingList",function(n){var i=t.extend({urlShoppingListJson:"",shoppingListPopinUrl:"",connectionPopUpUrl:"",shoppingListDisplayedId:"",productIdToDisplayAtLoad:"",addShoppingListToBasketUrl:"",oid:"",addShoppingListDivId:"main"},n),o=t("#menuV"),r=t(".jsShoppingList",o),f=function(){r.length&&i.urlShoppingListJson&&t.ajax({type:"GET",url:i.urlShoppingListJson,dataType:"json",cache:!1,success:function(n){n.connected=t.nav.session.isAuthenticate();r.html(t(Mustache.render(t("#lpSListTemplate").html(),n)));i.shoppingListDisplayedId&&t("select",r).val(i.shoppingListDisplayedId);r.show()}})},e,u;r.on("change","select",function(){var n=t(this).find(":selected").data("listtypeid"),i="";n&&(i="&listTypeId="+n);this.value&&(document.location.href="?listId="+this.value+i)});e=function(){var n=t(".popinAlimExpress",document.body);n.removeClass("popinFpPrdt");n.on("click",".jsAction:not(.jsDisabled)",function(){var n=t(this.form),i={addedClass:"popinAlimExpress",method:n.prop("method"),data:n.serialize(),callback:f};return t.popin.hideOverlay(),t.popin.loadAjaxPopin(n.prop("action"),i),!1});n.on("click",".jsPopin",function(){return t.popin.hideOverlay(),t.popin.loadAjaxPopin(t(this).data("url"),{addedClass:"popinAlimExpress"}),!1});n.on("click",".jsCheckbox",function(){var n=t(".jsAction",this.form);t("input[type=checkbox]:checked",this.form).length>0?(n.removeClass("jsDisabled disabled"),n.removeAttr("disabled")):(n.addClass("jsDisabled disabled"),n.attr("disabled","disabled"))});n.on("keypress",".sListName",function(n){var t=n||window.event,i=t.keyCode||t.which,i=String.fromCharCode(i);/^([\w\-àçèéêëîïôöùûü] {0,1})$/.test(i)||(t.returnValue=!1,t.preventDefault&&t.preventDefault())});n.on("keyup",".sListName",function(){$btnForm=t(".jsAction",this.form);this.value?($btnForm.removeClass("jsDisabled disabled"),$btnForm.removeAttr("disabled")):($btnForm.addClass("jsDisabled disabled"),$btnForm.attr("disabled","disabled"))});return f(),!1};t("#"+i.addShoppingListDivId).on("click",".jsAddToList",function(){var r=t(this).data("productid"),u=t(this).data("offerid"),f,n;if(t.nav.session.isAuthenticate())f={addedClass:"popinAlimExpress",callback:e},t.popin.loadAjaxPopin(i.shoppingListPopinUrl+"/"+r,f);else if(i.connectionPopUpUrl!=="")return n="/"+r,u!==undefined&&(n+="/"+u),t.windowPopupExpress(i.connectionPopUpUrl+n+".html","LoginPopup",830,600);return!1});i.addShoppingListToBasketUrl&&(t("#AddShoppingListToBasket").click(function(){var n={addedClass:"popinOverweight jsPopinOverweight",callback:function(){updateExpressBasket(t(".jsPopinOverweight").data("updateurl"));var n=Boolean(t("#jsOverWeight").data("overweight"));n&&t.popin.overWeightPopinSessionStorage()}};return t.popin.loadAjaxPopin(i.addShoppingListToBasketUrl,n),!1}),i.oid&&(u={addedClass:"popinAlimExpress cz",method:"POST",data:{orderId:i.oid},callback:function(){updateExpressBasket(t(".jsPopinOverweight").data("updateurl"));var n=Boolean(t("#jsOverWeight").data("overweight"));n&&t.popin.overWeightPopinSessionStorage()}},t.popin.loadAjaxPopin(i.addShoppingListToBasketUrl,u)));f();i.productIdToDisplayAtLoad&&(u={addedClass:"popinAlimExpress",callback:e},t.popin.loadAjaxPopin(i.shoppingListPopinUrl+"/"+i.productIdToDisplayAtLoad,u))})}(window,window.$fwk);$.init("nego",function(n){function a(){d();g()}function d(){(!e||isNaN(e))&&(e=2e3);setTimeout(function(){t.slideDown("slow")},e)}function g(){s&&s.length!=0&&setTimeout(function(){b&&y()},s)}function v(){var e=$("#fpContent .jsTop"),f=$(".jsSltSize, .jsSltColor, .jsSltCond",e),s=$(".jsValMsg",t),i,u,r,n;if(!f)return!0;if(i=f.filter(function(){var n;return n=this.value?this.value!=-1:$(this).data("value"),!n}).addClass("selMsgVar"),i.length>0){for(o(!0),u=errorMsg.begin,r=0,n=0;n<listErrorMsg.length;n++)i.filter(listErrorMsg[n].selector).length&&(u+=r>0?r==i.length-1?errorMsg.lastSeparator+listErrorMsg[n].message:errorMsg.separator+listErrorMsg[n].message:listErrorMsg[n].message,r++);s.html(u)}else o(!1);return!i.length}function o(n){n==!0?($(".jsValMsg",t).fadeTo("fast",1),$(".jsValidButton",t).addClass("clickDisabled")):n==!1&&($(".jsValMsg",t).fadeTo("fast",0),$(".jsValidButton",t).removeClass("clickDisabled"))}function y(){var t,n,e;return k!=null&&$.cookies.get("articles_count")==0?!1:(t=f.data("url"),n=null,k!=null?(e=$("#basketNegoIdent"),n={addedClass:r,callback:i,data:$(".jsBasketNegoForm",e).serialize()}):n={addedClass:r,callback:i,data:l.find(":input").not("[value*='.html']").serialize()},w?(nt(),h=setTimeout(function(){u(t,n)},3e3)):u(t,n),!1)}function u(n,t){var r=$("#popinContainer"),u=$("#popinResultContainer"),i=$("#loaderPopinContainer"),f;t.isMakeNegotiation||i.length||($.popin.showWaitingOverlay(),document.body.style.overflow="hidden");popin=document.createElement("div");$popin=$(popin);$popin.empty();$popin.hide();popin.className="popin";document.body.appendChild(popin);f=t.type!=null?t.type:"GET";$.ajax({type:f,url:n,dataType:"html",data:t.data,cache:!1,success:function(n){var e,f;$popin=$(popin);t.isMakeNegotiation?$popin.attr("id","popinResultContainer"):$popin.attr("id","popinContainer");e=document.createElement("div");e.className="pClose jsCancel";e.innerHTML="&#10006";popin.appendChild(e);t.addedClass&&$popin.addClass(t.addedClass);$.popin.showOverlay({isOverlayClick:!0,callback:function(){$(".ppCnego .jsCancel").trigger("click");document.body.style.overflow="auto"}});f=document.createElement("div");f.innerHTML=n;popin.appendChild(f);$(".jsCancel",$popin).click(function(){return $.popin.hideOverlay(),$popin.remove(),clearTimeout(h),document.body.style.overflow="auto",!1});r.length&&r.remove();u.length&&u.remove();i.length&&i.remove();f.getElementsByTagName("script").length>0&&eval(f.getElementsByTagName("script")[0].innerHTML);t.callback();$popin.show()},complete:function(){$("#waitingOverlay").hide();t.isMakeNegotiation||$(".jsCnegoProp input",$popin).focus()}})}function nt(){var n,t;loader=document.createElement("div");$loader=$(loader);$loader.empty();$loader.hide();loader.className="popin";document.body.appendChild(loader);$loader.attr("id","loaderPopinContainer");n=document.createElement("div");n.className="pClose jsCancel";n.innerHTML="&#10006";loader.appendChild(n);$loader.addClass(r);$.popin.showOverlay({isOverlayClick:!0,callback:function(){$(".ppCnego .jsCancel").trigger("click");document.body.style.overflow="auto"}});$secretPriceLoader=$(".jsSecretPricePopinLoader");t=document.createElement("div");t.innerHTML=$secretPriceLoader[0].innerHTML;loader.appendChild(t);$(".jsCancel",$loader).click(function(){return $.popin.hideOverlay(),$loader.remove(),clearTimeout(h),document.body.style.overflow="auto",!1});i();$loader.show()}function tt(n,t){var s,u,h,f;if(n=n.replace(/,/g,"."),s=isNaN(n),t.removeClass("ppCnegoInit ppCnego00 ppCnego01 ppCnego30 ppCnego30 ppCnego50 ppCnego70 ppCnego101 ppCnegoInvalid"),s)t.addClass("ppCnegoInvalid");else{var c=t.data("min"),r=t.data("top"),i=(n-c)/(r-c)*100,l=Math.round((r-n)*100)/100,a=(r-n)/r*100,e=r-n<=0;if(i=i<0||e?0:Math.round(i),e?t.addClass("ppCnego101"):i==0?t.addClass("ppCnego00"):i<30?t.addClass("ppCnego01"):i<50?t.addClass("ppCnego30"):i<70?t.addClass("ppCnego50"):t.addClass("ppCnego70"),u=$(".jsCnegoPercentGauge",t),h=$(".jsCnegoPercent span",t),h.html(i+"%"),i==0?u.height(100):u.height("calc("+(100-i)+"% + 0.42px)"),f=$(".jsCnegoEco .jsPercentEcoText",t),!e)if(l>a){var o=l.toFixed(2).toString().split("."),y=o[0],v=p;o.length>1&&(v=p+o[1]);f.html(y+"<sup>"+v+"<\/sup>")}else f.html(a.toFixed(2)+"%")}}function i(){function a(){if($(".jsSecretPriceTimerHour",n).length&&$(".jsSecretPriceTimerMinute",n).length&&$(".jsSecretPriceTimerSecond",n).length){var r=$(".jsSecretPriceTimerHour",n)[0].innerHTML,t=$(".jsSecretPriceTimerMinute",n)[0].innerHTML,i=$(".jsSecretPriceTimerSecond",n)[0].innerHTML;i=y(i-1);i==59&&i>0&&(t=y(t-1),t==59&&t>0&&(r=r-1));r<0&&(r="0",t="00",i="00",clearTimeout(a),$(v,n).prop("disabled",!0));$(".jsSecretPriceTimerHour",n)[0].innerHTML=r;$(".jsSecretPriceTimerMinute",n)[0].innerHTML=t;$(".jsSecretPriceTimerSecond",n)[0].innerHTML=i;setTimeout(a,1e3)}}function y(n){return n<10&&n>=0&&(n="0"+n),n<0&&(n="59"),n}var t=$("#ppCnego"),e,d=$(".jsCnegoBtCTA",t),g=$(".jsCnegoForm",t),f,o,s,h;d.click(function(){var f=this.form.action,n=$(".jsCnegoProp input",t),r;return n.val(n.val().replace(",",".")),r={addedClass:"ppCnego jsPpCnego ppCnegoW",data:g.serialize(),callback:i,isMakeNegotiation:!0},$.popin.showWaitingOverlay(),document.body.style.overflow="hidden",setTimeout(function(){u(f,r)},4e3),!1});var nt=$("#popinContainer"),p=$("#NegoLogin"),it=$("#loginCustomerBlock"),rt=$("form",p),w=$(".customerLogin",it),ut=$(".validateLogin",p),b=$(".addCdav",nt);w.click(function(){var n={addedClass:c,callback:i,data:l.find(":input").not("[value*='.html']").serialize()},t=w.data("url");u(t,n)});ut.click(function(){var n={addedClass:c,callback:i,data:rt.serialize(),type:"Post"},t=this.form.action;return u(t,n),!1});b.click(function(){var n={addedClass:r,callback:i},t=b.data("url");u(t,n)});t.on("keypress",".jsCnegoProp input",function(n){var f=/^[0-9]{1,4}([.|,][0-9]{0,2})?$/,i=n.which?n.which:n.charCode?n.charCode:n.keyCode?n.keyCode:0,r=String.fromCharCode(i),t=$(this).val(),u;this.selectionStart==0&&this.selectionEnd==this.value.length&&(t="");u=t.split("");(this.selectionStart!=this.selectionEnd||this.selectionStart==this.selectionEnd&&t.length!=this.selectionEnd)&&(u.splice(this.selectionStart,this.selectionEnd-this.selectionStart,r),t=u.join(""),r="");(i!=8||f.test(t))&&(i==8||f.test(t+r))||n.preventDefault()});t.on("keyup",".jsCnegoProp input",function(){e&&(clearTimeout(e),e=null);var n=this.value;e=setTimeout(function(){n!=""?tt(n,t):(t.removeClass("ppCnegoInit ppCnego00 ppCnego01 ppCnego30 ppCnego30 ppCnego50 ppCnego70 ppCnego101 ppCnegoInvalid"),t.addClass("ppCnegoInit"))},400)});f=$("#negoCdavResult");$(".jsCboxAddCdav",f).change(function(){this.checked?($(".jsNegotiationCustomerInfo",f).hide(),$(".ppCnegoAddToBasketWithCdav",f).show()):($(".ppCnegoAddToBasketWithCdav",f).hide(),$(".jsNegotiationCustomerInfo",f).show())});var n=$("#popinContainer, #popinResultContainer"),v=$(".jsNegotiationAddToBasket, .jsNegotiationUpdatePrice"),k=$(".jsSecretPriceCboxAddCdav",n);k.length&&!k.checked&&$(v,n).prop("disabled",!0);$(".jsSecretPriceCboxAddCdav",n).change(function(){$(v,n).prop("disabled",!this.checked)});n.on("click",".jsNegotiationAddToBasket",function(){return $("#addForm").addToBasket($(".jsNegoResultForm , form[name=variantForm], form[name=associatedProductsForm], form[name=garserProductsForm], form[name=AssemblyProductsForm]"))});n.on("click",".jsNegotiationUpdatePrice",function(){this.form.submit()});o=$(".jsSecretPriceTimerHour",n);o.length&&(o[0].innerHTML="2");s=$(".jsSecretPriceTimerMinute",n);s.length&&(s[0].innerHTML="00");h=$(".jsSecretPriceTimerSecond",n);h.length&&(h[0].innerHTML="00");o.length&&s.length&&h.length&&a()}var p=n.devise,it=n.isPersonalized,w=n.isSecretPrice,rt=n.negotiationUrl,t=$("#fpBlocPrice .jsNegociate, #qaBlocPrice .jsNegociate, #basketNegoIdent .jsBasketNegoForm"),f=$(".jsBtnNegociate",t),e=f.data("display-delay"),b=!0,s=f.data("display-popin-delay"),k=f.data("nego-basket"),h,r="ppCnego jsPpCnego ppCnegoB",c=r,l;w&&(r+=" secretPricePopin",c=r+" secretPriceLoginPopin");it?$.ajax({url:rt,method:"GET",dataType:"json",success:function(n){n.isEligibleForNegotiation&&a()}}):a();t.on("mouseover",".jsValidButton",function(){v()});t.on("mouseout",".jsValidButton",function(){o(!1)});l=$(".jsMainForm");f.on("click",function(){b=!1;var n=v();n&&y()})});$.init("reportReview",function(){function t(){var e=$(".jsReportReviewPopinContent"),t=$("#reportReviewPopinForm",e),i=$(".jsReportReviewText",t),r=$(".jsReportReviewBt",t),o=$(".jsReportReviewCharCount",t),s=$("span",t),u=$("input[name=IsCaptchaValidated]",t),f=null;i.on("keyup",function(){var t=i.val(),n=t.length;n>=15?(o.addClass("hidden"),r.removeClass("clickDisabled")):(s.text(15-n),o.removeClass("hidden"),r.addClass("clickDisabled"))});$(".jsReportReviewBt",t).on("mousemove",function(){var r=$(this),n=i.val(),u=n.length;(!n||u<15)&&(r.addClass("clickDisabled"),$(".jsErrorMsg",t).show())});$(".jsReportReviewBt",t).on("mouseout",function(){$(this).removeClass("clickDisabled");$(".jsErrorMsg",t).hide()});r.on("click",function(o){o.preventDefault();var h=i.val(),c=h.length,s=$(".g-recaptcha",t);return(refreshCaptcha=function(){f==null?f=grecaptcha.render(s[0],{sitekey:s.data("sitekey"),"expired-callback":"reportCaptchaExpired"}):grecaptcha.reset(f)},reportCaptchaValidated=function(){setCaptchaValidated(!0)},reportCaptchaExpired=function(){setCaptchaValidated(!1)},setCaptchaValidated=function(n){u&&u.length&&u.val(n)},s.length&&u.val()!=="true")?(refreshCaptcha(),!1):!h||c<15?(r.addClass("clickDisabled"),$(".jsErrorMsg",t).show(),!1):(toggleReport=function(){var t=n,r=t.parent(),i=t.parents(".jsDetRating"),u=i.find(".jsSta");t.remove();$(".jsReported",r).fadeToggle("fast");i.addClass("deactivatedDetRating");u.addClass("deactivatedRatingStar")},$.ajax({type:"POST",url:this.form.action,dataType:"html",data:t.serialize(),cache:!1,complete:function(){closePopin();toggleReport()}}),closePopin=function(){return $(".jsCancel",e).trigger("click"),!1},!1)})}var i=$(".jsDetRating"),r=$(".jsReportReview",i),n=null;r.on("click",function(){var i=$(this).data("review"),u=$(this).data("external"),r;return(urlPopin=$(this).data("url"),!i||!urlPopin)?!1:(n=$(this),r={addedClass:"popin reportReviewPopin ",callback:t,data:{ReviewId:i,ExternalId:u}},$.popin.showOverlay(),$.popin.loadAjaxPopin(urlPopin,r),!1)})}),function(n){n.track=n.track||{};n.track.providers=n.track.providers||[];n.track.send=n.track.send||function(){var t,i;for(t in n.track.providers)n.track.providers.hasOwnProperty(t)&&(i=n.track.providers[t],n.track[i].send())}}(jQuery),function(n){var t={};t.params=n.track&&n.track.tracking?n.track.tracking.params||{}:{};t.url="http://localhost:57918/realtimetracking/track";t.init=function(t){return function(){var u=document.documentElement,f=document.getElementsByTagName("body")[0],e=window.innerWidth||u.clientWidth||f.clientWidth,o=window.innerHeight||u.clientHeight||f.clientHeight,i,r;t.params.rH=o;t.params.rW=e;t.params.type!="SERVICE"&&(t.params.url=t.params.type=="ADD_TO_BASKET"&&t.params.url?window.location.href+t.params.url:window.location.href);t.params.fvid=n.cookies.get("UniqueVisitContext");t.params.type=="SEARCH"||t.params.ref||(t.params.ref=document.referrer);i=window.location.hash;i&&i.indexOf("atcpl")!=-1&&(t.params.type="PRODUCT_MERCHANDISING");r=document.cookie.indexOf("_$1okcook");t.params.prop24=r!=-1?document.cookie.substr(r+10,1):0}}(t);t.send=function(t){return function(i){var r,u;i||t.init();r=document.cookie.indexOf("_$1okcook");t.params.prop24=r!=-1?document.cookie.substr(r+10,1):0;u=JSON.stringify(t.params);n.ajax({url:t.url,type:"POST",data:u,contentType:"text/plain; charset=utf-8",dataType:"json",xhrFields:{withCredentials:!0},crossDomain:!0})}}(t);n.track.providers.push("tracking");n.track.tracking=t;n.init("RealTimeTracking")}(jQuery)